import{r as L,j as e,H as $,L as o,a as _}from"./app-CDLrXDSJ.js";import{A as I}from"./app-layout-RlSBJbLE.js";import{c as z,B as l}from"./button-DkAxeODS.js";import{B as i}from"./badge-Dv4yfngj.js";import{C as r,c as n,a as c,b as d}from"./card-DSp6dVJs.js";import{A as B,a as P,b as V,c as M,d as O,e as H,f as R,g as q}from"./alert-dialog-SmhIjdbF.js";import{A as Q}from"./arrow-left-DmcQ2qpf.js";import{S as h,a as b}from"./star-BlEMNggE.js";import{S as w}from"./square-pen-CUE8TT-z.js";import{T as y}from"./trash-2-BZWqxyJt.js";import{U as u}from"./user-CHx-8T4u.js";import{E as k}from"./eye-DfkwJnvV.js";import{E as W}from"./eye-off-CCSuwuFy.js";import{M as Y}from"./map-pin-CGZS5oVH.js";import{C as G}from"./calendar-BQivIL1l.js";import{V as D}from"./video-DEPMiEvx.js";import{I as A}from"./image-Yb_Jnxjt.js";import{U as J}from"./upload-Bc5wzV_c.js";import{D as K}from"./database-CPJOBm3T.js";import{L as X}from"./link-BxTtbo-n.js";import{E as T}from"./external-link-DNBLhdcV.js";/* empty css            */import"./index-VGP26jel.js";import"./index-DMbkFXFE.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],ee=z("Play",Z);function De({testimony:t}){const s={...t,survivor_name:t.survivor_name||"",survivor_age:t.survivor_age||null,survivor_location:t.survivor_location||"",date_of_incident:t.date_of_incident||"",background_image_path:t.background_image_path||"",is_active:t.is_active??!0,is_featured:t.is_featured??!1,translated_content:t.translated_content||{id:t.testimony_id||"",title:{en:"",ar:""},description:{en:"",ar:""},category:{en:"",ar:""}},media:t.media||[]},C=[{title:"Testimonies",href:"/testimonies"},{title:s.translated_content.title?.en||"View Testimony",href:`/testimonies/${s.id}`}],[U,m]=L.useState(!1),j=()=>{m(!0)},S=()=>{_.delete(`/testimonies/${s.id}`),m(!1)},g=()=>{_.patch(`/testimonies/${s.id}/toggle-featured`,{},{preserveState:!0,preserveScroll:!0})},p=()=>s.background_image_path?`/storage/${s.background_image_path}`:s.translated_content.imageUrl||null;return e.jsxs(I,{breadcrumbs:C,children:[e.jsx($,{title:`${s.translated_content.title?.en||"Testimony"} - View`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:justify-between sm:items-center",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(o,{href:"/testimonies",children:e.jsxs(l,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(Q,{className:"w-4 h-4"}),"Back to Testimonies"]})})}),e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:s.translated_content.title?.en||"Untitled Testimony"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"View and manage testimony details"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:g,className:"gap-2",children:s.is_featured?e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),"Featured"]}):e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"w-4 h-4"}),"Feature"]})}),e.jsx(o,{href:`/testimonies/${s.id}/edit`,children:e.jsxs(l,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(w,{className:"w-4 h-4"}),"Edit"]})}),e.jsxs(l,{variant:"destructive",size:"sm",onClick:j,className:"gap-2",children:[e.jsx(y,{className:"w-4 h-4"}),"Delete"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 max-w-7xl",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(r,{className:"overflow-hidden",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"aspect-[16/9] bg-muted flex items-center justify-center overflow-hidden",children:p()?e.jsx("img",{src:p(),alt:s.translated_content.title?.en||"Testimony",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(u,{className:"mx-auto w-12 h-12 mb-4"}),e.jsx("p",{children:"No background image"})]})}),e.jsxs("div",{className:"absolute top-3 right-3 flex gap-2",children:[s.is_featured&&e.jsxs(i,{variant:"default",className:"gap-1",children:[e.jsx(h,{className:"w-3 h-3 fill-current"}),"Featured"]}),e.jsxs(i,{variant:s.is_active?"default":"secondary",className:"gap-1",children:[s.is_active?e.jsx(k,{className:"w-3 h-3"}):e.jsx(W,{className:"w-3 h-3"}),s.is_active?"Active":"Inactive"]})]})]}),e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[s.translated_content.category?.en&&e.jsx(i,{variant:"outline",children:s.translated_content.category.en}),e.jsx("h2",{className:"text-2xl font-bold",children:s.translated_content.title?.en||"Untitled"}),s.translated_content.description?.en&&e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:s.translated_content.description.en})})]})})]}),(s.survivor_name||s.survivor_location||s.date_of_incident)&&e.jsxs(r,{className:"overflow-hidden",children:[e.jsx(c,{className:"px-6 py-4 border-b",children:e.jsxs(d,{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(u,{className:"w-5 h-5"}),"Survivor Information"]})}),e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.survivor_name&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Name"}),e.jsxs("p",{className:"text-sm mt-1 flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4 text-muted-foreground"}),s.survivor_name,s.survivor_age&&e.jsxs("span",{className:"text-muted-foreground",children:["(",s.survivor_age," years old)"]})]})]}),s.survivor_location&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Location"}),e.jsxs("p",{className:"text-sm mt-1 flex items-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4 text-muted-foreground"}),s.survivor_location]})]}),s.date_of_incident&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Incident Date"}),e.jsxs("p",{className:"text-sm mt-1 flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4 text-muted-foreground"}),new Date(s.date_of_incident).toLocaleDateString()]})]})]})})]}),e.jsxs(r,{className:"overflow-hidden",children:[e.jsx(c,{className:"px-6 py-4 border-b",children:e.jsx(d,{className:"text-lg font-semibold",children:"Arabic Content"})}),e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[s.translated_content.category?.ar&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Category"}),e.jsx("p",{className:"text-sm mt-1",dir:"rtl",children:s.translated_content.category.ar})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Title"}),e.jsx("h3",{className:"text-xl font-bold mt-1",dir:"rtl",children:s.translated_content.title?.ar||"لا يوجد عنوان"})]}),s.translated_content.description?.ar&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Description"}),e.jsx("div",{className:"prose max-w-none mt-1",children:e.jsx("p",{className:"text-muted-foreground leading-relaxed",dir:"rtl",children:s.translated_content.description.ar})})]})]})})]}),s.media&&s.media.length>0&&e.jsxs(r,{className:"overflow-hidden",children:[e.jsx(c,{className:"px-6 py-4 border-b",children:e.jsxs(d,{className:"text-lg font-semibold",children:["Attached Media (",s.media.length,")"]})}),e.jsx(n,{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.media.map(a=>{const F=()=>{switch(a.source_type){case"upload":return a.file_path?`/storage/${a.file_path}`:null;case"google_drive":return a.google_drive_id?`https://drive.google.com/uc?id=${a.google_drive_id}`:null;case"external_link":return a.external_url||null;default:return null}},E=()=>a.thumbnail_path?`/storage/${a.thumbnail_path}`:a.source_type==="google_drive"&&a.type==="image"&&a.google_drive_id?`https://drive.google.com/thumbnail?id=${a.google_drive_id}&sz=w300`:null,x=F(),f=E()||x;return e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsx("div",{className:"aspect-video bg-muted flex items-center justify-center relative",children:f?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:f,alt:a.title?.en||"Media",className:"w-full h-full object-cover",onError:N=>{N.currentTarget.style.display="none";const v=N.currentTarget.nextElementSibling;v&&(v.style.display="flex")}}),e.jsxs("div",{className:"hidden flex-col items-center gap-2 text-muted-foreground",children:[a.type==="video"?e.jsx(D,{className:"w-8 h-8"}):e.jsx(A,{className:"w-8 h-8"}),e.jsx("span",{className:"text-xs",children:"Preview unavailable"})]}),a.type==="video"&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:e.jsx("div",{className:"w-12 h-12 bg-black/60 rounded-full flex items-center justify-center",children:e.jsx(ee,{className:"w-6 h-6 text-white ml-1"})})})]}):e.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[a.type==="video"?e.jsx(D,{className:"w-8 h-8"}):e.jsx(A,{className:"w-8 h-8"}),e.jsx("span",{className:"text-xs",children:"No preview"})]})}),e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h4",{className:"text-sm font-medium truncate",children:a.title?.en||"Untitled"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(i,{variant:"outline",className:"text-xs capitalize",children:a.type}),e.jsxs(i,{variant:"secondary",className:"text-xs",children:[a.source_type==="upload"&&e.jsx(J,{className:"w-3 h-3 mr-1"}),a.source_type==="google_drive"&&e.jsx(K,{className:"w-3 h-3 mr-1"}),a.source_type==="external_link"&&e.jsx(X,{className:"w-3 h-3 mr-1"}),a.source_type.replace("_"," ")]})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:a.media_id}),e.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:[a.source_type==="upload"&&a.file_path&&e.jsxs("span",{children:["File: ",a.file_path.split("/").pop()]}),a.source_type==="google_drive"&&a.google_drive_id&&e.jsxs("span",{children:["Drive ID: ",a.google_drive_id.substring(0,8),"..."]}),a.source_type==="external_link"&&a.external_url&&e.jsxs("span",{children:["External: ",new URL(a.external_url).hostname]})]}),e.jsxs("div",{className:"flex gap-1",children:[x&&e.jsx("a",{href:x,target:"_blank",rel:"noopener noreferrer",className:"flex-1",children:e.jsxs(l,{variant:"outline",size:"sm",className:"w-full gap-1",children:[e.jsx(T,{className:"w-3 h-3"}),"View"]})}),e.jsx(o,{href:`/media/${a.id}`,children:e.jsxs(l,{variant:"outline",size:"sm",className:"gap-1",children:[e.jsx(k,{className:"w-3 h-3"}),"Edit"]})})]})]})]},a.id)})})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(r,{children:[e.jsx(c,{className:"px-6 py-4 border-b",children:e.jsx(d,{className:"text-lg font-semibold",children:"Testimony Information"})}),e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"ID:"}),e.jsx("span",{className:"font-mono",children:s.testimony_id})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"URL Slug:"}),e.jsx("span",{className:"font-mono",children:s.url_slug})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx(i,{variant:s.is_active?"default":"secondary",children:s.is_active?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Featured:"}),e.jsx(i,{variant:s.is_featured?"default":"outline",children:s.is_featured?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Sort Order:"}),e.jsx("span",{children:s.sort_order})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Media Count:"}),e.jsx("span",{children:s.media?.length||0})]})]})})]}),s.background_image_path&&e.jsxs(r,{children:[e.jsx(c,{className:"px-6 py-4 border-b",children:e.jsx(d,{className:"text-lg font-semibold",children:"Background Image"})}),e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"aspect-video bg-muted rounded overflow-hidden",children:e.jsx("img",{src:`/storage/${s.background_image_path}`,alt:"Background",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:"text-muted-foreground block mb-1",children:"Path:"}),e.jsx("span",{className:"font-mono text-xs bg-muted p-2 rounded block break-all",children:s.background_image_path})]}),e.jsx("a",{href:`/storage/${s.background_image_path}`,target:"_blank",rel:"noopener noreferrer",children:e.jsxs(l,{variant:"outline",size:"sm",className:"w-full gap-2",children:[e.jsx(T,{className:"w-4 h-4"}),"View Full Size"]})})]})})]}),e.jsxs(r,{children:[e.jsx(c,{className:"px-6 py-4 border-b",children:e.jsx(d,{className:"text-lg font-semibold",children:"Timestamps"})}),e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Created:"}),e.jsx("span",{children:s.created_at?new Date(s.created_at).toLocaleString():"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Updated:"}),e.jsx("span",{children:s.updated_at?new Date(s.updated_at).toLocaleString():"N/A"})]})]})})]}),e.jsxs(r,{children:[e.jsx(c,{className:"px-6 py-4 border-b",children:e.jsx(d,{className:"text-lg font-semibold",children:"Quick Actions"})}),e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{href:`/testimonies/${s.id}/edit`,className:"block",children:e.jsxs(l,{variant:"outline",className:"w-full gap-2",children:[e.jsx(w,{className:"w-4 h-4"}),"Edit Testimony"]})}),e.jsx(l,{variant:"outline",onClick:g,className:"w-full gap-2",children:s.is_featured?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"w-4 h-4"}),"Remove from Featured"]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"w-4 h-4"}),"Add to Featured"]})}),e.jsxs(l,{variant:"destructive",onClick:j,className:"w-full gap-2",children:[e.jsx(y,{className:"w-4 h-4"}),"Delete Testimony"]})]})})]})]})]})]}),e.jsx(B,{open:U,onOpenChange:m,children:e.jsxs(P,{children:[e.jsxs(V,{children:[e.jsx(M,{children:"Are you sure?"}),e.jsxs(O,{children:['This action cannot be undone. This will permanently delete the testimony "',s.translated_content.title?.en||"Untitled",'" and all associated content.',s.media&&s.media.length>0&&e.jsxs("span",{className:"block mt-2 font-medium text-destructive",children:["Warning: This testimony has ",s.media.length," attached media files."]})]})]}),e.jsxs(H,{children:[e.jsx(R,{children:"Cancel"}),e.jsx(q,{onClick:S,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Permanently"})]})]})})]})}export{De as default};
