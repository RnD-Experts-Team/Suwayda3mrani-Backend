import{r as o,j as e,H as V,L as d,a as u}from"./app-BIiAsSdM.js";import{A as W}from"./app-layout-j6e297M5.js";import{c as X,B as i}from"./button-Ci3GZDdP.js";import{B as p}from"./badge-4-t4-OA8.js";import{C as f,c as g}from"./card-BHKFko1u.js";import{C as D}from"./checkbox-B0PAlLDD.js";import{A as _,a as k,b as T,c as S,d as A,e as P,f as I,g as $}from"./alert-dialog-G1g5WWdw.js";import{P as Y,a as Z,b as E,c as ee,d as se,e as te}from"./pagination-GVkz4pEb.js";import{T as j}from"./trash-2-B3hIqHbf.js";import{P as z}from"./plus-CdFjKuL7.js";import{S as ae,a as le}from"./star-Dn1jgidp.js";import{C as ne}from"./calendar-CCAh_iUo.js";import{E as ie}from"./eye-BbWxfl9D.js";import{S as re}from"./square-pen-BQ7rtMax.js";/* empty css            */import"./index-DC2lEfLk.js";import"./index-DCH5W3Q5.js";import"./index-C4z22CSr.js";import"./check-BLUgC2N0.js";import"./chevron-left-DGk8U06R.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],B=X("Clock",ce),oe=[{title:"Timeline Events",href:"/timeline-events"}];function Ae(O){const{timelineEvents:l=null}=O||{},t={data:l?.data||[],links:l?.links||[],meta:{current_page:l?.current_page||1,last_page:l?.last_page||1,per_page:l?.per_page||12,total:l?.total||0,from:l?.from||null,to:l?.to||null}},[a,r]=o.useState([]),[L,m]=o.useState(!1),[H,x]=o.useState(!1),[N,v]=o.useState(null),R=s=>{s&&t.data.length>0?r(t.data.map(n=>n.id)):r([])},U=(s,n)=>{r(n?h=>[...h,s]:h=>h.filter(Q=>Q!==s))},q=s=>{v(s),m(!0)},F=()=>{N&&u.delete(`/timeline-events/${N}`),m(!1),v(null)},y=()=>{x(!0)},G=()=>{a.length>0&&u.post("/timeline-events/bulk-delete",{ids:a}),x(!1),r([])},J=s=>{u.patch(`/timeline-events/${s.id}/toggle-highlighted`,{},{preserveState:!0,preserveScroll:!0})};t.data.length>0;const b=t.meta.total===0,c=t.meta.total,w=t.meta.from,C=t.meta.to,K=()=>b?"No timeline events found. Create your first timeline event to get started.":w&&C?`Showing ${w} to ${C} of ${c} results`:c>0?`${c} timeline event${c!==1?"s":""}`:"Loading timeline events...",M=()=>e.jsx(f,{className:"overflow-hidden",children:e.jsx(g,{className:"py-16",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-muted rounded-full flex items-center justify-center",children:e.jsx(B,{className:"w-8 h-8 text-muted-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"No timeline events yet"}),e.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:"Create your first timeline event to start documenting historical events."})]}),e.jsx("div",{className:"flex justify-center gap-2 pt-4",children:e.jsx(d,{href:"/timeline-events/create",children:e.jsxs(i,{className:"gap-2",children:[e.jsx(z,{className:"w-4 h-4"}),"Create Timeline Event"]})})})]})})});return e.jsxs(W,{breadcrumbs:oe,children:[e.jsx(V,{title:"Timeline Events"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:justify-between sm:items-center",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Timeline Events"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:K()})]}),e.jsxs("div",{className:"flex gap-2",children:[a.length>0&&e.jsxs(i,{variant:"destructive",onClick:y,size:"sm",className:"gap-2",children:[e.jsx(j,{className:"w-4 h-4"}),"Delete Selected (",a.length,")"]}),e.jsx(d,{href:"/timeline-events/create",children:e.jsxs(i,{size:"sm",className:"gap-2",children:[e.jsx(z,{className:"w-4 h-4"}),"Create Timeline Event"]})})]})]}),b?e.jsx(M,{}):e.jsxs(e.Fragment,{children:[a.length>0&&e.jsx(f,{children:e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{checked:a.length===t.data.length&&t.data.length>0,onCheckedChange:R}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[a.length," of ",t.data.length," selected"]})]}),e.jsxs(i,{variant:"destructive",size:"sm",onClick:y,className:"gap-2",children:[e.jsx(j,{className:"w-4 h-4"}),"Delete Selected"]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.data.map(s=>e.jsxs(f,{className:"overflow-hidden group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-3 left-3 z-10",children:e.jsx(D,{checked:a.includes(s.id),onCheckedChange:n=>U(s.id,!!n)})}),e.jsx("button",{onClick:()=>J(s),className:"absolute top-3 right-3 z-10 p-1 rounded-full bg-black/50 text-white opacity-0 group-hover:opacity-100 transition-opacity",children:s.is_highlighted?e.jsx(ae,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}):e.jsx(le,{className:"w-4 h-4"})}),e.jsx("div",{className:"aspect-[4/3] bg-muted flex items-center justify-center",children:s.translated_content?.mediaUrl?s.translated_content.mediaType==="video"?e.jsx("video",{src:s.translated_content.mediaUrl,className:"w-full h-full object-cover",muted:!0}):e.jsx("img",{src:s.translated_content.mediaUrl,alt:s.translated_content?.title?.en||"Timeline event",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[e.jsx(B,{className:"w-8 h-8"}),e.jsx("span",{className:"text-xs",children:"No media"})]})}),e.jsx("div",{className:"absolute bottom-3 left-3",children:e.jsxs(p,{variant:"secondary",className:"text-xs",children:[e.jsx(ne,{className:"w-3 h-3 mr-1"}),s.period||"No period"]})})]}),e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-semibold text-sm line-clamp-2",children:s.translated_content?.title?.en||"Untitled Timeline Event"}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-3",children:s.translated_content?.description?.en||"No description"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:["ID: ",s.timeline_event_id||"Unknown"]}),s.media_count>0&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.media_count," media item",s.media_count!==1?"s":""]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Order: ",s.sort_order??0]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx(d,{href:`/timeline-events/${s.id}`,children:e.jsx(i,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(ie,{className:"w-4 h-4"})})}),e.jsx(d,{href:`/timeline-events/${s.id}/edit`,children:e.jsx(i,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(re,{className:"w-4 h-4"})})}),e.jsx(i,{variant:"outline",size:"sm",onClick:()=>q(s.id),className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:e.jsx(j,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex gap-1",children:[s.is_highlighted&&e.jsx(p,{variant:"default",className:"text-xs",children:"Highlighted"}),!s.is_active&&e.jsx(p,{variant:"secondary",className:"text-xs",children:"Inactive"})]})]})]})})]},s.id))}),t.meta.last_page>1&&e.jsx("div",{className:"flex justify-center",children:e.jsx(Y,{children:e.jsx(Z,{children:t.links.map((s,n)=>e.jsx(E,{children:s.label==="&laquo; Previous"?e.jsx(ee,{href:s.url||"#",className:s.url?"":"pointer-events-none opacity-50"}):s.label==="Next &raquo;"?e.jsx(se,{href:s.url||"#",className:s.url?"":"pointer-events-none opacity-50"}):e.jsx(te,{href:s.url||"#",isActive:s.active,className:s.url?"":"pointer-events-none opacity-50",children:s.label})},n))})})})]})]}),e.jsx(_,{open:L,onOpenChange:m,children:e.jsxs(k,{children:[e.jsxs(T,{children:[e.jsx(S,{children:"Are you sure?"}),e.jsx(A,{children:"This action cannot be undone. This will permanently delete the timeline event and all associated content."})]}),e.jsxs(P,{children:[e.jsx(I,{children:"Cancel"}),e.jsx($,{onClick:F,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),e.jsx(_,{open:H,onOpenChange:x,children:e.jsxs(k,{children:[e.jsxs(T,{children:[e.jsxs(S,{children:["Delete ",a.length," timeline events?"]}),e.jsx(A,{children:"This action cannot be undone. This will permanently delete the selected timeline events and all associated content."})]}),e.jsxs(P,{children:[e.jsx(I,{children:"Cancel"}),e.jsx($,{onClick:G,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete All"})]})]})})]})}export{Ae as default};
