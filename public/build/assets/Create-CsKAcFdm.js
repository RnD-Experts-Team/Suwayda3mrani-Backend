import{u as I,r as y,j as e,H as O}from"./app-CrR2e6si.js";import{A as U,X as A}from"./app-layout-BlBsKGdN.js";import{B as g}from"./button-TAkYr07m.js";import{I as d}from"./input-DyR6yKAK.js";import{L as l}from"./label-CqnHdu-e.js";import{T as b}from"./textarea-BSwCwaMA.js";import{S as P}from"./switch-DBf-5lju.js";import{C as m,a as x,b as u,c as h}from"./card-C4Ze9f0h.js";import{B as w}from"./badge-xFiofwbL.js";import{C as R}from"./checkbox--b9gynK0.js";import{U as C}from"./upload-CRwMzx92.js";import{U as k}from"./user-uMJOBb_l.js";import{M as z}from"./map-pin-B-6LJAuz.js";import{C as G}from"./calendar-DJjfRyov.js";import{V as S}from"./video-BhSqQus5.js";import{I as j}from"./image-LVo2oCVD.js";/* empty css            */import"./index-DIhEDuut.js";import"./index-Cp7DFzk1.js";import"./index-MGpkUcMS.js";import"./check-D3rtSHKw.js";const $=[{title:"Testimonies",href:"/testimonies"},{title:"Create",href:"/testimonies/create"}];function me({availableMedia:N}){const{data:t,setData:r,post:F,processing:f,errors:a}=I({category_en:"",category_ar:"",title_en:"",title_ar:"",description_en:"",description_ar:"",survivor_name:"",survivor_age:"",survivor_location:"",date_of_incident:"",background_image:null,url_slug:"",is_featured:!1,media_ids:[]}),[o,T]=y.useState(null),[n,p]=y.useState([]),B=s=>{const i=s.target.files?.[0];if(i){r("background_image",i);const c=new FileReader;c.onload=v=>T(v.target?.result),c.readAsDataURL(i)}},L=s=>s.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),_=(s,i)=>{r(`title_${i}`,s),i==="en"&&!t.url_slug&&r("url_slug",L(s))},D=(s,i)=>{i?(p(c=>[...c,s]),r("media_ids",[...t.media_ids,s.id])):(p(c=>c.filter(v=>v.id!==s.id)),r("media_ids",t.media_ids.filter(c=>c!==s.id)))},M=s=>{p(i=>i.filter(c=>c.id!==s)),r("media_ids",t.media_ids.filter(i=>i!==s))},E=s=>{s.preventDefault(),F("/testimonies")};return e.jsxs(U,{breadcrumbs:$,children:[e.jsx(O,{title:"Create Testimony"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:[e.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:justify-between sm:items-center",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Create New Testimony"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Share a survivor's story"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 max-w-7xl",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(m,{className:"overflow-hidden",children:[e.jsx(x,{className:"px-6 py-4 border-b",children:e.jsx(u,{className:"text-lg font-semibold",children:"Testimony Details"})}),e.jsx(h,{className:"p-6",children:e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground uppercase tracking-wide",children:"Survivor Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"survivor_name",children:"Name (Optional)"}),e.jsx(d,{id:"survivor_name",type:"text",placeholder:"Survivor's name",value:t.survivor_name,onChange:s=>r("survivor_name",s.target.value),className:a.survivor_name?"border-destructive":""}),a.survivor_name&&e.jsx("p",{className:"text-sm text-destructive",children:a.survivor_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"survivor_age",children:"Age (Optional)"}),e.jsx(d,{id:"survivor_age",type:"number",placeholder:"Age",min:"1",max:"150",value:t.survivor_age,onChange:s=>r("survivor_age",s.target.value),className:a.survivor_age?"border-destructive":""}),a.survivor_age&&e.jsx("p",{className:"text-sm text-destructive",children:a.survivor_age})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"survivor_location",children:"Location (Optional)"}),e.jsx(d,{id:"survivor_location",type:"text",placeholder:"Location",value:t.survivor_location,onChange:s=>r("survivor_location",s.target.value),className:a.survivor_location?"border-destructive":""}),a.survivor_location&&e.jsx("p",{className:"text-sm text-destructive",children:a.survivor_location})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"date_of_incident",children:"Incident Date (Optional)"}),e.jsx(d,{id:"date_of_incident",type:"date",value:t.date_of_incident,onChange:s=>r("date_of_incident",s.target.value),className:a.date_of_incident?"border-destructive":""}),a.date_of_incident&&e.jsx("p",{className:"text-sm text-destructive",children:a.date_of_incident})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{children:"Background Image (Optional)"}),e.jsx("div",{className:"border-2 border-dashed border-border rounded-lg p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[o?e.jsxs("div",{className:"space-y-3",children:[e.jsx("img",{src:o,alt:"Background preview",className:"mx-auto max-h-32 rounded"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.background_image?.name})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{className:"mx-auto h-8 w-8 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Click to upload background image"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"JPG, PNG, GIF (max 5MB)"})]})]}),e.jsx("input",{type:"file",onChange:B,accept:"image/*",className:"sr-only",id:"background-upload"}),e.jsxs(l,{htmlFor:"background-upload",className:"cursor-pointer inline-flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:[e.jsx(C,{className:"w-4 h-4"}),"Choose Background"]})]})}),a.background_image&&e.jsx("p",{className:"text-sm text-destructive",children:a.background_image})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground uppercase tracking-wide",children:"Content"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-sm text-muted-foreground",children:"English Content"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"category_en",children:"Category (Optional)"}),e.jsx(d,{id:"category_en",type:"text",placeholder:"e.g., Survivor Story",value:t.category_en,onChange:s=>r("category_en",s.target.value),className:a.category_en?"border-destructive":""}),a.category_en&&e.jsx("p",{className:"text-sm text-destructive",children:a.category_en})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"title_en",children:"Title *"}),e.jsx(d,{id:"title_en",type:"text",placeholder:"Enter English title",value:t.title_en,onChange:s=>_(s.target.value,"en"),className:a.title_en?"border-destructive":""}),a.title_en&&e.jsx("p",{className:"text-sm text-destructive",children:a.title_en})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"description_en",children:"Description *"}),e.jsx(b,{id:"description_en",placeholder:"Enter English description",value:t.description_en,onChange:s=>r("description_en",s.target.value),rows:6,className:a.description_en?"border-destructive":""}),a.description_en&&e.jsx("p",{className:"text-sm text-destructive",children:a.description_en})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-sm text-muted-foreground",children:"Arabic Content"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"category_ar",children:"Category (Optional)"}),e.jsx(d,{id:"category_ar",type:"text",placeholder:"مثال: قصة ناجي",value:t.category_ar,onChange:s=>r("category_ar",s.target.value),className:a.category_ar?"border-destructive":"",dir:"rtl"}),a.category_ar&&e.jsx("p",{className:"text-sm text-destructive",children:a.category_ar})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"title_ar",children:"Title *"}),e.jsx(d,{id:"title_ar",type:"text",placeholder:"أدخل العنوان بالعربية",value:t.title_ar,onChange:s=>_(s.target.value,"ar"),className:a.title_ar?"border-destructive":"",dir:"rtl"}),a.title_ar&&e.jsx("p",{className:"text-sm text-destructive",children:a.title_ar})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"description_ar",children:"Description *"}),e.jsx(b,{id:"description_ar",placeholder:"أدخل الوصف بالعربية",value:t.description_ar,onChange:s=>r("description_ar",s.target.value),rows:6,className:a.description_ar?"border-destructive":"",dir:"rtl"}),a.description_ar&&e.jsx("p",{className:"text-sm text-destructive",children:a.description_ar})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"url_slug",children:"URL Slug *"}),e.jsx(d,{id:"url_slug",type:"text",placeholder:"testimony-url-slug",value:t.url_slug,onChange:s=>r("url_slug",s.target.value),className:`font-mono ${a.url_slug?"border-destructive":""}`}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["URL: /testimonies/",t.url_slug||"testimony-url-slug"]}),a.url_slug&&e.jsx("p",{className:"text-sm text-destructive",children:a.url_slug})]}),e.jsxs("div",{className:"flex items-center gap-3 py-2",children:[e.jsx(P,{checked:t.is_featured,onCheckedChange:s=>r("is_featured",s)}),e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-medium leading-none",children:"Featured Testimony"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Show this testimony on the home page"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(g,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:"Cancel"}),e.jsx(g,{type:"submit",disabled:f,className:"gap-2",children:f?"Creating...":"Create Testimony"})]})]})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(m,{children:[e.jsx(x,{className:"px-6 py-4 border-b",children:e.jsx(u,{className:"text-lg font-semibold",children:"Preview"})}),e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-[4/3] bg-muted rounded-lg flex items-center justify-center",children:o?e.jsx("img",{src:o,alt:"Background preview",className:"w-full h-full object-cover rounded-lg"}):e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(k,{className:"mx-auto w-8 h-8 mb-2"}),e.jsx("p",{className:"text-sm",children:"No background image"})]})}),e.jsxs("div",{className:"space-y-2",children:[t.category_en&&e.jsx(w,{variant:"outline",className:"text-xs",children:t.category_en}),e.jsx("h3",{className:"font-medium text-sm",children:t.title_en||"Title will appear here"}),t.description_en&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-3",children:t.description_en})]}),(t.survivor_name||t.survivor_location||t.date_of_incident)&&e.jsxs("div",{className:"space-y-1 pt-2 border-t",children:[t.survivor_name&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(k,{className:"w-3 h-3"}),t.survivor_name,t.survivor_age&&`, ${t.survivor_age} years old`]}),t.survivor_location&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(z,{className:"w-3 h-3"}),t.survivor_location]}),t.date_of_incident&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(G,{className:"w-3 h-3"}),new Date(t.date_of_incident).toLocaleDateString()]})]}),e.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Featured:"}),e.jsx("span",{children:t.is_featured?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Media:"}),e.jsxs("span",{children:[n.length," item",n.length!==1?"s":""]})]})]})]})})]}),n.length>0&&e.jsxs(m,{children:[e.jsx(x,{className:"px-6 py-4 border-b",children:e.jsxs(u,{className:"text-lg font-semibold",children:["Selected Media (",n.length,")"]})}),e.jsx(h,{className:"p-6",children:e.jsx("div",{className:"space-y-3",children:n.map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-2 border rounded",children:[e.jsx("div",{className:"w-12 h-12 bg-muted rounded overflow-hidden",children:s.thumbnail||s.url?e.jsx("img",{src:s.thumbnail||s.url,alt:s.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.type==="video"?e.jsx(S,{className:"w-4 h-4 text-muted-foreground"}):e.jsx(j,{className:"w-4 h-4 text-muted-foreground"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:s.type})]}),e.jsx(g,{type:"button",variant:"outline",size:"sm",onClick:()=>M(s.id),className:"h-8 w-8 p-0",children:e.jsx(A,{className:"w-4 h-4"})})]},s.id))})})]}),e.jsxs(m,{children:[e.jsxs(x,{className:"px-6 py-4 border-b",children:[e.jsx(u,{className:"text-lg font-semibold",children:"Media Gallery"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select media to attach to this testimony"})]}),e.jsx(h,{className:"p-6",children:e.jsx("div",{className:"max-h-96 overflow-y-auto space-y-3",children:N.length>0?N.map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-2",children:[e.jsx(R,{checked:t.media_ids.includes(s.id),onCheckedChange:i=>D(s,!!i)}),e.jsx("div",{className:"w-12 h-12 bg-muted rounded overflow-hidden",children:s.thumbnail||s.url?e.jsx("img",{src:s.thumbnail||s.url,alt:s.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.type==="video"?e.jsx(S,{className:"w-4 h-4 text-muted-foreground"}):e.jsx(j,{className:"w-4 h-4 text-muted-foreground"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{variant:"outline",className:"text-xs capitalize",children:s.type}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.media_id})]})]})]},s.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(j,{className:"mx-auto w-8 h-8 text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No media available. Create some media first."})]})})})]})]})]})]})]})}export{me as default};
