import{u as B,r as C,j as e,H as I}from"./app-CDLrXDSJ.js";import{A as M}from"./app-layout-RlSBJbLE.js";import{B as p}from"./button-DkAxeODS.js";import{I as n}from"./input-kG73NwrJ.js";import{T as w}from"./textarea-D4YVHxtD.js";import{L as c}from"./label-Bm7htFpx.js";import{S as k}from"./switch-CI0OpXgl.js";import{S as R,a as $,b as z,c as H,d as P}from"./select-CCjrtCIO.js";import{C as u,a as j,b as v,c as g}from"./card-DSp6dVJs.js";import{B as N}from"./badge-Dv4yfngj.js";import{C as K}from"./checkbox-DSqH2tAu.js";import{C as O}from"./calendar-BQivIL1l.js";import{P as q}from"./plus-CP0LLEOj.js";import{T as G}from"./trash-2-BZWqxyJt.js";import{V as J}from"./video-DEPMiEvx.js";import{U as Q}from"./upload-Bc5wzV_c.js";import{E as W}from"./external-link-DNBLhdcV.js";import{I as X}from"./image-Yb_Jnxjt.js";/* empty css            */import"./index-VGP26jel.js";import"./index-DMbkFXFE.js";import"./index-BJIqLsx3.js";import"./check-Cyaeh_xi.js";function _e({case:d,translations:x,details:E,caseTypes:y,mediaItems:m,attachedMediaIds:f}){const S=[{title:"Cases",href:"/cases"},{title:"Edit",href:`/cases/${d.id}/edit`}],{data:a,setData:r,post:A,processing:b,errors:t}=B({_method:"PUT",title_en:x.title_en||"",title_ar:x.title_ar||"",description_en:x.description_en||"",description_ar:x.description_ar||"",type:d.type,incident_date:d.incident_date,location:d.location||"",external_url:d.external_url||"",is_active:d.is_active,is_featured:d.is_featured,media_ids:f,details:E}),[F,_]=C.useState([]);C.useEffect(()=>{const s=m.filter(l=>f.includes(l.id));_(s)},[m,f]);const T=()=>{r("details",[...a.details,{key_en:"",key_ar:"",value_en:"",value_ar:""}])},L=s=>{const l=a.details.filter((i,o)=>o!==s);r("details",l)},h=(s,l,i)=>{const o=[...a.details];o[s]={...o[s],[l]:i},r("details",o)},U=(s,l)=>{l?(_(i=>[...i,s]),r("media_ids",[...a.media_ids,s.id])):(_(i=>i.filter(o=>o.id!==s.id)),r("media_ids",a.media_ids.filter(i=>i!==s.id)))},D=s=>{s.preventDefault(),A(`/cases/${d.id}`)},V=(s,l)=>s==="video"?e.jsx(J,{className:"w-4 h-4"}):l==="upload"?e.jsx(Q,{className:"w-4 h-4"}):l==="external_link"?e.jsx(W,{className:"w-4 h-4"}):e.jsx(X,{className:"w-4 h-4"});return e.jsxs(M,{breadcrumbs:S,children:[e.jsx(I,{title:`Edit Case - ${x.title_en||"Untitled"}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:justify-between sm:items-center",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Edit Case"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Update case details and settings"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(N,{variant:"outline",className:"font-mono",children:["#",d.case_id]}),e.jsx(N,{variant:a.is_active?"default":"secondary",children:a.is_active?"Active":"Inactive"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 max-w-7xl",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(u,{className:"overflow-hidden",children:[e.jsx(j,{className:"px-6 py-4 border-b",children:e.jsx(v,{className:"text-lg font-semibold",children:"Case Information"})}),e.jsx(g,{className:"p-6",children:e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{htmlFor:"type",children:"Case Type *"}),e.jsxs(R,{value:a.type,onValueChange:s=>r("type",s),children:[e.jsx($,{className:t.type?"border-destructive":"",children:e.jsx(z,{placeholder:"Select case type"})}),e.jsx(H,{children:Object.entries(y).map(([s,l])=>e.jsx(P,{value:s,children:l.en},s))})]}),t.type&&e.jsx("p",{className:"text-sm text-destructive",children:t.type})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{htmlFor:"title_en",children:"Title (English) *"}),e.jsx(n,{id:"title_en",type:"text",placeholder:"Case title in English",value:a.title_en,onChange:s=>r("title_en",s.target.value),className:t.title_en?"border-destructive":""}),t.title_en&&e.jsx("p",{className:"text-sm text-destructive",children:t.title_en})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{htmlFor:"title_ar",children:"Title (Arabic) *"}),e.jsx(n,{id:"title_ar",type:"text",placeholder:"عنوان القضية بالعربية",value:a.title_ar,onChange:s=>r("title_ar",s.target.value),className:t.title_ar?"border-destructive":"",dir:"rtl"}),t.title_ar&&e.jsx("p",{className:"text-sm text-destructive",children:t.title_ar})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{htmlFor:"description_en",children:"Description (English)"}),e.jsx(w,{id:"description_en",placeholder:"Case description in English",value:a.description_en,onChange:s=>r("description_en",s.target.value),rows:4,className:t.description_en?"border-destructive":""}),t.description_en&&e.jsx("p",{className:"text-sm text-destructive",children:t.description_en})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{htmlFor:"description_ar",children:"Description (Arabic)"}),e.jsx(w,{id:"description_ar",placeholder:"وصف القضية بالعربية",value:a.description_ar,onChange:s=>r("description_ar",s.target.value),rows:4,className:t.description_ar?"border-destructive":"",dir:"rtl"}),t.description_ar&&e.jsx("p",{className:"text-sm text-destructive",children:t.description_ar})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{htmlFor:"incident_date",children:"Incident Date *"}),e.jsxs("div",{className:"relative",children:[e.jsx(O,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(n,{id:"incident_date",type:"date",value:a.incident_date,onChange:s=>r("incident_date",s.target.value),className:`pl-10 ${t.incident_date?"border-destructive":""}`})]}),t.incident_date&&e.jsx("p",{className:"text-sm text-destructive",children:t.incident_date})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{htmlFor:"location",children:"Location"}),e.jsx(n,{id:"location",type:"text",placeholder:"Case location",value:a.location,onChange:s=>r("location",s.target.value),className:t.location?"border-destructive":""}),t.location&&e.jsx("p",{className:"text-sm text-destructive",children:t.location})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{htmlFor:"external_url",children:"External URL"}),e.jsx(n,{id:"external_url",type:"url",placeholder:"https://example.com/case-documentation",value:a.external_url,onChange:s=>r("external_url",s.target.value),className:t.external_url?"border-destructive":""}),t.external_url&&e.jsx("p",{className:"text-sm text-destructive",children:t.external_url})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 py-2",children:[e.jsx(k,{checked:a.is_active,onCheckedChange:s=>r("is_active",s)}),e.jsxs("div",{children:[e.jsx(c,{className:"text-sm font-medium leading-none",children:"Active Case"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Make this case visible in the system"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 py-2",children:[e.jsx(k,{checked:a.is_featured,onCheckedChange:s=>r("is_featured",s)}),e.jsxs("div",{children:[e.jsx(c,{className:"text-sm font-medium leading-none",children:"Featured Case"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Make this case featured on the data overview page"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:"Cancel"}),e.jsx(p,{type:"submit",disabled:b,className:"gap-2",children:b?"Updating...":"Update Case"})]})]})})]}),e.jsxs(u,{className:"overflow-hidden",children:[e.jsx(j,{className:"px-6 py-4 border-b",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(v,{className:"text-lg font-semibold",children:"Case Details"}),e.jsxs(p,{type:"button",onClick:T,size:"sm",className:"gap-2",children:[e.jsx(q,{className:"w-4 h-4"}),"Add Detail"]})]})}),e.jsx(g,{className:"p-6",children:a.details.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("p",{children:"No case details added yet."}),e.jsx("p",{className:"text-sm",children:'Click "Add Detail" to add key-value pairs for this case.'})]}):e.jsx("div",{className:"space-y-4",children:a.details.map((s,l)=>e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 p-4 border rounded-lg",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Key (English)"}),e.jsx(n,{placeholder:"e.g., Location",value:s.key_en,onChange:i=>h(l,"key_en",i.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Key (Arabic)"}),e.jsx(n,{placeholder:"مثال: الموقع",value:s.key_ar,onChange:i=>h(l,"key_ar",i.target.value),dir:"rtl"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Value (English)"}),e.jsx(n,{placeholder:"e.g., Village A",value:s.value_en,onChange:i=>h(l,"value_en",i.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Value (Arabic)"}),e.jsx(n,{placeholder:"مثال: القرية أ",value:s.value_ar,onChange:i=>h(l,"value_ar",i.target.value),dir:"rtl"})]})]}),e.jsx("div",{className:"lg:col-span-2 flex justify-end",children:e.jsxs(p,{type:"button",variant:"outline",size:"sm",onClick:()=>L(l),className:"text-destructive hover:text-destructive gap-2",children:[e.jsx(G,{className:"w-4 h-4"}),"Remove"]})})]},l))})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(u,{children:[e.jsx(j,{className:"px-6 py-4 border-b",children:e.jsx(v,{className:"text-lg font-semibold",children:"Case Info"})}),e.jsx(g,{className:"p-6",children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Case ID:"}),e.jsx("span",{className:"font-mono",children:d.case_id})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Type:"}),e.jsx("span",{className:"capitalize",children:y[a.type]?.en||a.type})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Created:"}),e.jsx("span",{children:new Date(d.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Updated:"}),e.jsx("span",{children:new Date(d.updated_at).toLocaleDateString()})]})]})})]}),e.jsxs(u,{children:[e.jsx(j,{className:"px-6 py-4 border-b",children:e.jsxs(v,{className:"text-lg font-semibold",children:["Attach Media (",F.length," selected)"]})}),e.jsx(g,{className:"p-6",children:e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:m.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No media items available"}):m.map(s=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 border rounded",children:[e.jsx(K,{checked:a.media_ids.includes(s.id),onCheckedChange:l=>U(s,!!l)}),e.jsx("div",{className:"w-12 h-12 bg-muted rounded flex items-center justify-center overflow-hidden",children:s.thumbnail||s.url?e.jsx("img",{src:s.thumbnail||s.url,alt:s.title.en,className:"w-full h-full object-cover"}):V(s.type,s.source_type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:s.title.en||s.media_id}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(N,{variant:"outline",className:"text-xs",children:s.type}),e.jsx(N,{variant:"secondary",className:"text-xs",children:s.source_type})]})]})]},s.id))})})]})]})]})]})]})}export{_e as default};
