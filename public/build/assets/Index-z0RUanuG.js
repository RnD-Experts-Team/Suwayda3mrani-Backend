import{r,a as x,j as e,H as Ce,L as f}from"./app-kFe3W52v.js";import{A as Se}from"./app-layout-CeMAjsTz.js";import{B as l}from"./button-CjP7rKh3.js";import{I as Ae}from"./input-BgsbDBET.js";import{S as D,a as k,b as F,c as z,d as o}from"./select-oXQEokxY.js";import{B as T}from"./badge-f65TfQO7.js";import{C as y,a as De,b as ke,c as b}from"./card-C2Q4dehj.js";import{C as Q}from"./checkbox-BKqEJ5F5.js";import{A as X,a as Y,b as Z,c as ee,d as se,e as te,f as ae,g as le}from"./alert-dialog-DS3D93Mr.js";import{P as Fe,a as ze,b as Te,c as Ie,d as Oe,e as Pe}from"./pagination-00dvCoQg.js";import{T as I}from"./trash-2-C_sWwEww.js";import{T as Be}from"./tag-IYtTykJX.js";import{P as re}from"./plus-CNZpktWk.js";import{F as Ee}from"./filter-JjIGzD36.js";import{R as ie}from"./rotate-ccw-CUpgzOHS.js";import{S as ne}from"./search-CCKJ6W69.js";import{S as Ve,a as $e}from"./star-BEhyOQjL.js";import{B as O,U as Le,M as Re}from"./users-B5YrAe4s.js";import{E as He}from"./external-link-oqV1Dx5r.js";import{E as qe}from"./eye-BaSUxmf4.js";import{S as Me}from"./square-pen-D52l7do5.js";/* empty css            */import"./index-DM-IqmN2.js";import"./index-DGqGJZ-A.js";import"./index-CMYKVjK-.js";import"./check-tbrJmj50.js";import"./chevron-left-50bH4gFX.js";const Ue=[{title:"Aid Organizations",href:"/aid-organizations"}];function Ns(ce){const{organizations:c=null,categories:P=null,filters:oe=null}=ce||{},a={data:c?.data||[],links:c?.links||[],meta:{current_page:c?.current_page||1,last_page:c?.last_page||1,per_page:c?.per_page||12,total:c?.total||0,from:c?.from||null,to:c?.to||null}},de=Array.isArray(P)?P:[],p=oe||{},[d,B]=r.useState(p.search||""),[j,E]=r.useState(p.type||"__all__"),[N,V]=r.useState(p.category||"__all__"),[v,$]=r.useState(p.featured||"__all__"),[i,g]=r.useState([]),[me,w]=r.useState(!1),[he,C]=r.useState(!1),[L,R]=r.useState(null),[ue,xe]=r.useState(!0);r.useEffect(()=>{if(ue){xe(!1);return}const s=setTimeout(()=>{H()},300);return()=>clearTimeout(s)},[d]);const m=s=>s==="__all__"?"":s,H=()=>{const s={};d?.trim()&&(s.search=d.trim());const t=m(j);t&&(s.type=t);const n=m(N);n&&(s.category=n);const u=m(v);u&&(s.featured=u),x.get("/aid-organizations",Object.keys(s).length>0?s:{},{preserveState:!0,preserveScroll:!0})},S=(s={})=>{const t={},n=s.search!==void 0?s.search:d,u=s.type!==void 0?s.type:j,be=s.category!==void 0?s.category:N,we=s.featured!==void 0?s.featured:v;n?.trim()&&(t.search=n.trim());const G=m(u);G&&(t.type=G);const J=m(be);J&&(t.category=J);const K=m(we);K&&(t.featured=K),x.get("/aid-organizations",Object.keys(t).length>0?t:{},{preserveState:!0,preserveScroll:!0})},q=()=>{B(""),E("__all__"),V("__all__"),$("__all__"),x.get("/aid-organizations")},ge=s=>{s&&a.data.length>0?g(a.data.map(t=>t.id)):g([])},fe=(s,t)=>{g(t?n=>[...n,s]:n=>n.filter(u=>u!==s))},pe=s=>{R(s),w(!0)},je=()=>{L&&x.delete(`/aid-organizations/${L}`),w(!1),R(null)},M=()=>{C(!0)},Ne=()=>{i.length>0&&x.post("/aid-organizations/bulk-delete",{ids:i}),C(!1),g([])},ve=s=>{x.patch(`/aid-organizations/${s.id}/toggle-featured`,{},{preserveState:!0,preserveScroll:!0})},h=!!(d?.trim()||j!=="__all__"||N!=="__all__"||v!=="__all__");a.data.length>0;const A=a.meta.total===0,_=a.meta.total,U=a.meta.from,W=a.meta.to,_e=()=>A&&!h?"No organizations found. Create your first organization to get started.":A&&h?"No results match your current filters.":U&&W?`Showing ${U} to ${W} of ${_} results`:_>0?`${_} organization${_!==1?"s":""}`:"Loading organizations...",ye=()=>e.jsx(y,{className:"overflow-hidden",children:e.jsx(b,{className:"py-16",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-muted rounded-full flex items-center justify-center",children:e.jsx(O,{className:"w-8 h-8 text-muted-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:h?"No organizations found":"No organizations yet"}),e.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:h?"Try adjusting your filters to find what you're looking for.":"Create your first aid organization to showcase relief efforts."})]}),e.jsxs("div",{className:"flex justify-center gap-2 pt-4",children:[h&&e.jsxs(l,{variant:"outline",onClick:q,className:"gap-2",children:[e.jsx(ie,{className:"w-4 h-4"}),"Clear Filters"]}),e.jsx(f,{href:"/aid-organizations/create",children:e.jsxs(l,{className:"gap-2",children:[e.jsx(re,{className:"w-4 h-4"}),"Create Organization"]})})]})]})})});return e.jsxs(Se,{breadcrumbs:Ue,children:[e.jsx(Ce,{title:"Aid Organizations"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:justify-between sm:items-center",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Aid Organizations"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:_e()})]}),e.jsxs("div",{className:"flex gap-2",children:[i.length>0&&e.jsxs(l,{variant:"destructive",onClick:M,size:"sm",className:"gap-2",children:[e.jsx(I,{className:"w-4 h-4"}),"Delete Selected (",i.length,")"]}),e.jsx(f,{href:"/aid-categories",children:e.jsxs(l,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(Be,{className:"w-4 h-4"}),"Manage Categories"]})}),e.jsx(f,{href:"/aid-organizations/create",children:e.jsxs(l,{size:"sm",className:"gap-2",children:[e.jsx(re,{className:"w-4 h-4"}),"Create Organization"]})})]})]}),e.jsxs(y,{className:"overflow-hidden",children:[e.jsx(De,{className:"px-6 py-4 border-b",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"w-4 h-4 text-muted-foreground"}),e.jsx(ke,{className:"text-lg font-semibold",children:"Filters"})]}),h&&e.jsxs(l,{variant:"outline",size:"sm",onClick:q,className:"gap-2",children:[e.jsx(ie,{className:"w-4 h-4"}),"Clear Filters"]})]})}),e.jsx(b,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(Ae,{type:"text",placeholder:"Search organizations...",value:d,onChange:s=>B(s.target.value),className:"pl-10"})]}),e.jsxs(D,{value:j,onValueChange:s=>{E(s),S({type:s})},children:[e.jsx(k,{children:e.jsx(F,{placeholder:"All Types"})}),e.jsxs(z,{children:[e.jsx(o,{value:"__all__",children:"All Types"}),e.jsx(o,{value:"organizations",children:"Organizations"}),e.jsx(o,{value:"initiatives",children:"Initiatives"})]})]}),e.jsxs(D,{value:N,onValueChange:s=>{V(s),S({category:s})},children:[e.jsx(k,{children:e.jsx(F,{placeholder:"All Categories"})}),e.jsxs(z,{children:[e.jsx(o,{value:"__all__",children:"All Categories"}),de.map(s=>e.jsx(o,{value:s.slug,children:s.name},s.slug))]})]}),e.jsxs(D,{value:v,onValueChange:s=>{$(s),S({featured:s})},children:[e.jsx(k,{children:e.jsx(F,{placeholder:"All Items"})}),e.jsxs(z,{children:[e.jsx(o,{value:"__all__",children:"All Items"}),e.jsx(o,{value:"true",children:"Featured Only"}),e.jsx(o,{value:"false",children:"Not Featured"})]})]}),e.jsxs(l,{onClick:H,className:"gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),"Search"]})]})})]}),A?e.jsx(ye,{}):e.jsxs(e.Fragment,{children:[i.length>0&&e.jsx(y,{children:e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{checked:i.length===a.data.length&&a.data.length>0,onCheckedChange:ge}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[i.length," of ",a.data.length," selected"]})]}),e.jsxs(l,{variant:"destructive",size:"sm",onClick:M,className:"gap-2",children:[e.jsx(I,{className:"w-4 h-4"}),"Delete Selected"]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.data.map(s=>e.jsxs(y,{className:"overflow-hidden group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-3 left-3 z-10",children:e.jsx(Q,{checked:i.includes(s.id),onCheckedChange:t=>fe(s.id,!!t)})}),e.jsx("button",{onClick:()=>ve(s),className:"absolute top-3 right-3 z-10 p-1 rounded-full bg-black/50 text-white opacity-0 group-hover:opacity-100 transition-opacity",children:s.is_featured?e.jsx(Ve,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}):e.jsx($e,{className:"w-4 h-4"})}),e.jsx("div",{className:"aspect-[4/3] bg-muted flex items-center justify-center",children:s.translated_content.en.backgroundImage?e.jsx("img",{src:s.translated_content.en.backgroundImage,alt:s.translated_content.en.name,className:"w-full h-full object-cover"}):e.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[e.jsx(O,{className:"w-8 h-8"}),e.jsx("span",{className:"text-xs",children:"No image"})]})}),e.jsx("div",{className:"absolute bottom-3 left-3",children:e.jsxs(T,{variant:"secondary",className:"gap-1 capitalize",children:[s.type==="organizations"?e.jsx(O,{className:"w-3 h-3"}):e.jsx(Le,{className:"w-3 h-3"}),s.type==="organizations"?"Org":"Initiative"]})})]}),e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[s.categories_count>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:e.jsxs(T,{variant:"outline",className:"text-xs",children:[s.categories_count," categor",s.categories_count!==1?"ies":"y"]})}),e.jsx("h3",{className:"font-semibold text-sm line-clamp-2",children:s.translated_content.en.name||"Untitled"}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-3",children:s.translated_content.en.description||"No description"}),e.jsxs("div",{className:"flex gap-1",children:[s.website_url&&e.jsx("a",{href:s.website_url,target:"_blank",rel:"noopener noreferrer",className:"p-1 rounded hover:bg-muted text-muted-foreground hover:text-foreground",children:e.jsx(He,{className:"w-4 h-4"})}),s.contact_url&&e.jsx("a",{href:s.contact_url,target:"_blank",rel:"noopener noreferrer",className:"p-1 rounded hover:bg-muted text-muted-foreground hover:text-foreground",children:e.jsx(Re,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx(f,{href:`/aid-organizations/${s.id}`,children:e.jsx(l,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(qe,{className:"w-4 h-4"})})}),e.jsx(f,{href:`/aid-organizations/${s.id}/edit`,children:e.jsx(l,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(Me,{className:"w-4 h-4"})})}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>pe(s.id),className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:e.jsx(I,{className:"w-4 h-4"})})]}),s.is_featured&&e.jsx(T,{variant:"default",className:"text-xs",children:"Featured"})]})]})})]},s.id))}),a.meta.last_page>1&&e.jsx("div",{className:"flex justify-center",children:e.jsx(Fe,{children:e.jsx(ze,{children:a.links.map((s,t)=>e.jsx(Te,{children:s.label==="&laquo; Previous"?e.jsx(Ie,{href:s.url||"#",className:s.url?"":"pointer-events-none opacity-50"}):s.label==="Next &raquo;"?e.jsx(Oe,{href:s.url||"#",className:s.url?"":"pointer-events-none opacity-50"}):e.jsx(Pe,{href:s.url||"#",isActive:s.active,className:s.url?"":"pointer-events-none opacity-50",children:s.label})},t))})})})]})]}),e.jsx(X,{open:me,onOpenChange:w,children:e.jsxs(Y,{children:[e.jsxs(Z,{children:[e.jsx(ee,{children:"Are you sure?"}),e.jsx(se,{children:"This action cannot be undone. This will permanently delete the organization and all associated content."})]}),e.jsxs(te,{children:[e.jsx(ae,{children:"Cancel"}),e.jsx(le,{onClick:je,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),e.jsx(X,{open:he,onOpenChange:C,children:e.jsxs(Y,{children:[e.jsxs(Z,{children:[e.jsxs(ee,{children:["Delete ",i.length," organizations?"]}),e.jsx(se,{children:"This action cannot be undone. This will permanently delete the selected organizations and all associated content."})]}),e.jsxs(te,{children:[e.jsx(ae,{children:"Cancel"}),e.jsx(le,{onClick:Ne,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete All"})]})]})})]})}export{Ns as default};
