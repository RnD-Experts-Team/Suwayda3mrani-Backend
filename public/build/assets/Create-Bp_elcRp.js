import{u as E,r as F,j as e,H as L}from"./app-CuYpSSgs.js";import{A as T}from"./app-layout-CCQxBU-9.js";import{B as x}from"./button-BxKMp8qb.js";import{I as d}from"./input-CRn8jIjM.js";import{T as _}from"./textarea-DfljV9Sr.js";import{L as c}from"./label-BJ1yjCM1.js";import{S as V}from"./switch-BbXUgjZr.js";import{S as I,a as M,b as B,c as R,d as z}from"./select-CBMT3uRI.js";import{C as m,a as h,b as p,c as u}from"./card-Bpx2lRpX.js";import{B as j}from"./badge-CfbOZw5B.js";import{C as H}from"./checkbox-MGz7lwGe.js";import{C as y}from"./calendar-thvZ0c4H.js";import{P}from"./plus-De2B4CEw.js";import{T as U}from"./trash-2-OvpkVNt5.js";import{V as K}from"./video-EcTfO07t.js";import{U as O}from"./upload-CYzjMUx3.js";import{E as $}from"./external-link-BIovKc56.js";import{I as q}from"./image-CsfuCqQi.js";/* empty css            */import"./index-C2c3w-e9.js";import"./index-BFKrvHBb.js";import"./index-imNlOuT5.js";import"./check-ByG_a4G5.js";const G=[{title:"Dashboard",href:"/dashboard"},{title:"Cases",href:"/cases"},{title:"Create",href:"/cases/create"}];function ve({caseTypes:v,mediaItems:N}){const{data:a,setData:r,post:b,processing:g,errors:t}=E({title_en:"",title_ar:"",description_en:"",description_ar:"",type:"",incident_date:"",location:"",external_url:"",is_featured:!1,media_ids:[],details:[]}),[C,f]=F.useState([]),w=()=>{r("details",[...a.details,{key_en:"",key_ar:"",value_en:"",value_ar:""}])},k=s=>{const l=a.details.filter((i,n)=>n!==s);r("details",l)},o=(s,l,i)=>{const n=[...a.details];n[s]={...n[s],[l]:i},r("details",n)},D=(s,l)=>{l?(f(i=>[...i,s]),r("media_ids",[...a.media_ids,s.id])):(f(i=>i.filter(n=>n.id!==s.id)),r("media_ids",a.media_ids.filter(i=>i!==s.id)))},S=s=>{s.preventDefault(),b("/cases")},A=(s,l)=>s==="video"?e.jsx(K,{className:"w-4 h-4"}):l==="upload"?e.jsx(O,{className:"w-4 h-4"}):l==="external_link"?e.jsx($,{className:"w-4 h-4"}):e.jsx(q,{className:"w-4 h-4"});return e.jsxs(T,{breadcrumbs:G,children:[e.jsx(L,{title:"Create Case"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:[e.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:justify-between sm:items-center",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Create New Case"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add a new case to document incidents"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 max-w-7xl",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(m,{className:"overflow-hidden",children:[e.jsx(h,{className:"px-6 py-4 border-b",children:e.jsx(p,{className:"text-lg font-semibold",children:"Case Information"})}),e.jsx(u,{className:"p-6",children:e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{htmlFor:"type",children:"Case Type *"}),e.jsxs(I,{value:a.type,onValueChange:s=>r("type",s),children:[e.jsx(M,{className:t.type?"border-destructive":"",children:e.jsx(B,{placeholder:"Select case type"})}),e.jsx(R,{children:Object.entries(v).map(([s,l])=>e.jsx(z,{value:s,children:l.en},s))})]}),t.type&&e.jsx("p",{className:"text-sm text-destructive",children:t.type})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{htmlFor:"title_en",children:"Title (English) *"}),e.jsx(d,{id:"title_en",type:"text",placeholder:"Case title in English",value:a.title_en,onChange:s=>r("title_en",s.target.value),className:t.title_en?"border-destructive":""}),t.title_en&&e.jsx("p",{className:"text-sm text-destructive",children:t.title_en})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{htmlFor:"title_ar",children:"Title (Arabic) *"}),e.jsx(d,{id:"title_ar",type:"text",placeholder:"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‚Ø¶ÙŠØ© Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",value:a.title_ar,onChange:s=>r("title_ar",s.target.value),className:t.title_ar?"border-destructive":"",dir:"rtl"}),t.title_ar&&e.jsx("p",{className:"text-sm text-destructive",children:t.title_ar})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{htmlFor:"description_en",children:"Description (English)"}),e.jsx(_,{id:"description_en",placeholder:"Case description in English",value:a.description_en,onChange:s=>r("description_en",s.target.value),rows:4,className:t.description_en?"border-destructive":""}),t.description_en&&e.jsx("p",{className:"text-sm text-destructive",children:t.description_en})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{htmlFor:"description_ar",children:"Description (Arabic)"}),e.jsx(_,{id:"description_ar",placeholder:"ÙˆØµÙ Ø§Ù„Ù‚Ø¶ÙŠØ© Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",value:a.description_ar,onChange:s=>r("description_ar",s.target.value),rows:4,className:t.description_ar?"border-destructive":"",dir:"rtl"}),t.description_ar&&e.jsx("p",{className:"text-sm text-destructive",children:t.description_ar})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{htmlFor:"incident_date",children:"Incident Date *"}),e.jsxs("div",{className:"relative",children:[e.jsx(y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(d,{id:"incident_date",type:"date",value:a.incident_date,onChange:s=>r("incident_date",s.target.value),className:`pl-10 ${t.incident_date?"border-destructive":""}`})]}),t.incident_date&&e.jsx("p",{className:"text-sm text-destructive",children:t.incident_date})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{htmlFor:"location",children:"Location"}),e.jsx(d,{id:"location",type:"text",placeholder:"Case location",value:a.location,onChange:s=>r("location",s.target.value),className:t.location?"border-destructive":""}),t.location&&e.jsx("p",{className:"text-sm text-destructive",children:t.location})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{htmlFor:"external_url",children:"External URL"}),e.jsx(d,{id:"external_url",type:"url",placeholder:"https://example.com/case-documentation",value:a.external_url,onChange:s=>r("external_url",s.target.value),className:t.external_url?"border-destructive":""}),t.external_url&&e.jsx("p",{className:"text-sm text-destructive",children:t.external_url})]})]}),e.jsxs("div",{className:"flex items-center gap-3 py-2",children:[e.jsx(V,{checked:a.is_featured,onCheckedChange:s=>r("is_featured",s)}),e.jsxs("div",{children:[e.jsx(c,{className:"text-sm font-medium leading-none",children:"Featured Case"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Make this case featured on the data overview page"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:"Cancel"}),e.jsx(x,{type:"submit",disabled:g,className:"gap-2",children:g?"Creating...":"Create Case"})]})]})})]}),e.jsxs(m,{className:"overflow-hidden",children:[e.jsx(h,{className:"px-6 py-4 border-b",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(p,{className:"text-lg font-semibold",children:"Case Details"}),e.jsxs(x,{type:"button",onClick:w,size:"sm",className:"gap-2",children:[e.jsx(P,{className:"w-4 h-4"}),"Add Detail"]})]})}),e.jsx(u,{className:"p-6",children:a.details.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("p",{children:"No case details added yet."}),e.jsx("p",{className:"text-sm",children:'Click "Add Detail" to add key-value pairs for this case.'})]}):e.jsx("div",{className:"space-y-4",children:a.details.map((s,l)=>e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 p-4 border rounded-lg",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Key (English)"}),e.jsx(d,{placeholder:"e.g., Location",value:s.key_en,onChange:i=>o(l,"key_en",i.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Key (Arabic)"}),e.jsx(d,{placeholder:"Ù…Ø«Ø§Ù„: Ø§Ù„Ù…ÙˆÙ‚Ø¹",value:s.key_ar,onChange:i=>o(l,"key_ar",i.target.value),dir:"rtl"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Value (English)"}),e.jsx(d,{placeholder:"e.g., Village A",value:s.value_en,onChange:i=>o(l,"value_en",i.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Value (Arabic)"}),e.jsx(d,{placeholder:"Ù…Ø«Ø§Ù„: Ø§Ù„Ù‚Ø±ÙŠØ© Ø£",value:s.value_ar,onChange:i=>o(l,"value_ar",i.target.value),dir:"rtl"})]})]}),e.jsx("div",{className:"lg:col-span-2 flex justify-end",children:e.jsxs(x,{type:"button",variant:"outline",size:"sm",onClick:()=>k(l),className:"text-destructive hover:text-destructive gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),"Remove"]})})]},l))})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(m,{children:[e.jsx(h,{className:"px-6 py-4 border-b",children:e.jsx(p,{className:"text-lg font-semibold",children:"Preview"})}),e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[a.type&&e.jsx("div",{children:e.jsx(j,{variant:"secondary",className:"capitalize",children:v[a.type]?.en||a.type})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-sm",children:a.title_en||"Case title"}),e.jsx("p",{className:"text-xs text-muted-foreground",dir:"rtl",children:a.title_ar||"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‚Ø¶ÙŠØ©"})]}),(a.description_en||a.description_ar)&&e.jsxs("div",{className:"space-y-2",children:[a.description_en&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-3",children:a.description_en}),a.description_ar&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-3",dir:"rtl",children:a.description_ar})]}),(a.incident_date||a.location)&&e.jsxs("div",{className:"space-y-1 pt-2 border-t",children:[a.incident_date&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(y,{className:"w-3 h-3"}),new Date(a.incident_date).toLocaleDateString()]}),a.location&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["ðŸ“ ",a.location]})]}),a.is_featured&&e.jsx(j,{variant:"default",className:"text-xs",children:"Featured"})]})})]}),e.jsxs(m,{children:[e.jsx(h,{className:"px-6 py-4 border-b",children:e.jsxs(p,{className:"text-lg font-semibold",children:["Attach Media (",C.length," selected)"]})}),e.jsx(u,{className:"p-6",children:e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:N.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No media items available"}):N.map(s=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 border rounded",children:[e.jsx(H,{checked:a.media_ids.includes(s.id),onCheckedChange:l=>D(s,!!l)}),e.jsx("div",{className:"w-12 h-12 bg-muted rounded flex items-center justify-center overflow-hidden",children:s.thumbnail||s.url?e.jsx("img",{src:s.thumbnail||s.url,alt:s.title.en,className:"w-full h-full object-cover"}):A(s.type,s.source_type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:s.title.en||s.media_id}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(j,{variant:"outline",className:"text-xs",children:s.type}),e.jsx(j,{variant:"secondary",className:"text-xs",children:s.source_type})]})]})]},s.id))})})]})]})]})]})]})}export{ve as default};
