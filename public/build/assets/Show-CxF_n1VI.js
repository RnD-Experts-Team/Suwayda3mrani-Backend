import{j as e,H as _,L as N}from"./app-CrR2e6si.js";import{A as f}from"./app-layout-BlBsKGdN.js";import{B as v}from"./button-TAkYr07m.js";import{C as t,a as d,b as c,c as o}from"./card-C4Ze9f0h.js";import{B as j}from"./badge-xFiofwbL.js";import{E as u}from"./external-link-BqZ6Sbhq.js";import{C as b}from"./circle-check-big-DArS4YJV.js";import{C}from"./clock-zWHX3nMe.js";/* empty css            */import"./index-DIhEDuut.js";import"./index-Cp7DFzk1.js";const F=[{title:"Form Entries",href:"/form-entries"},{title:"View",href:""}];function r(i,l){return l==null||l===""?null:e.jsxs("p",{className:"mb-2",children:[e.jsxs("strong",{className:"text-gray-700",children:[i,":"]}),e.jsx("span",{className:"ml-2",children:l})]})}function x(i){if(!i||i==="")return null;try{const l=JSON.parse(i);return!Array.isArray(l)||l.length===0?null:e.jsx("div",{className:"flex flex-col gap-1",children:l.map((a,s)=>e.jsxs("a",{href:a.trim(),target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 flex gap-1 items-center hover:underline",children:["Image ",s+1," ",e.jsx(u,{className:"w-4 h-4"})]},s))})}catch{const a=i.split(",").filter(s=>s.trim()!=="");return a.length===0?null:e.jsx("div",{className:"flex flex-col gap-1",children:a.map((s,h)=>e.jsxs("a",{href:s.trim(),target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 flex gap-1 items-center hover:underline",children:["Image ",h+1," ",e.jsx(u,{className:"w-4 h-4"})]},h))})}}function k(i){if(!i||i==="")return null;const l=i.split(",").filter(a=>a.trim()!=="");return l.length===0?null:e.jsx("div",{className:"flex flex-wrap gap-1",children:l.map((a,s)=>e.jsx(j,{variant:"outline",children:a},s))})}function p(i){return!i||i.length===0?e.jsx("span",{className:"text-gray-500",children:"No needs"}):e.jsx("div",{className:"space-y-2",children:i.map(l=>e.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded bg-gray-50",children:[l.pivot.is_fulfilled?e.jsx(b,{className:"w-4 h-4 text-green-500"}):e.jsx(C,{className:"w-4 h-4 text-yellow-500"}),e.jsx("span",{className:"font-medium",children:l.name_ar}),e.jsx(j,{variant:l.pivot.is_fulfilled?"default":"secondary",children:l.pivot.is_fulfilled?"✓":"Pending"}),l.pivot.notes&&e.jsxs("span",{className:"text-sm text-gray-600",children:["(",l.pivot.notes,")"]})]},l.id))})}function m(i){return i==="نعم"?"Yes":i==="لا"?"No":i||"N/A"}function H({entry:i,allNeeds:l,stats:a}){return e.jsxs(f,{breadcrumbs:F,children:[e.jsx(_,{title:`Entry ${i.entry_number||"N/A"}`}),e.jsxs("div",{className:"flex flex-col gap-4 p-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Entry #",i.entry_number||"N/A"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.total_displaced_families," families • ",a.total_needs," total needs • ",a.fulfilled_needs," fulfilled"]})]}),e.jsx(v,{asChild:!0,variant:"outline",children:e.jsx(N,{href:"/form-entries",children:"← Back to Entries"})})]}),e.jsxs(t,{children:[e.jsx(d,{children:e.jsx(c,{children:"Entry Details"})}),e.jsxs(o,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[r("Form ID",i.form_id),r("Entry Number",i.entry_number),r("Submitter Name",i.submitter_name),r("Location",i.location),i.status&&r("Status",k(i.status))]}),e.jsxs("div",{children:[i.InternalLink&&r("Internal Link",e.jsxs("a",{href:i.InternalLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 flex gap-1 items-center",children:["View Form ",e.jsx(u,{className:"w-4 h-4"})]})),r("Date Submitted",i.date_submitted?new Date(i.date_submitted).toLocaleString():null),r("Hosted Families Count",i.hosted_families_count),r("Martyrs Count",i.martyrs_count),r("Shelters Count",i.shelters_count)]})]})]}),i.host&&i.host.full_name&&e.jsxs(t,{children:[e.jsx(d,{children:e.jsx(c,{children:"Host Information"})}),e.jsxs(o,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[r("Full Name",i.host.full_name),r("Family Count",i.host.family_count),r("Location",i.host.location),r("Address",i.host.address),r("Phone",i.host.phone)]}),e.jsxs("div",{children:[r("Family Book Number",i.host.family_book_number),r("Children Under 8 Months",m(i.host.children_under_8_months)),i.host.children_under_8_months==="نعم"&&r("Birth Details",i.host.birth_details)]})]})]}),i.displacedFamilies?.length>0&&e.jsxs(t,{children:[e.jsx(d,{children:e.jsxs(c,{children:["Displaced Families (",i.displacedFamilies.length,")"]})}),e.jsx(o,{children:i.displacedFamilies.map((s,h)=>e.jsxs(t,{className:"mb-4",children:[e.jsx(d,{children:e.jsxs(c,{className:"text-lg",children:["Family ",h+1]})}),e.jsxs(o,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[r("Individuals Count",s.individuals_count),r("Contact",s.contact),r("Wife Name",s.wife_name),r("Children Info",s.children_info),r("Family Book Number",s.family_book_number),r("Assistance Type",s.assistance_type),r("Provider",s.provider),r("Date Received",s.date_received),r("Notes",s.notes)]}),e.jsxs("div",{children:[r("Return Possible",m(s.return_possible)),r("Previous Assistance",m(s.previous_assistance)),r("Children Under 8 Months",m(s.children_under_8_months)),s.children_under_8_months==="نعم"&&r("Birth Details",s.birth_details),s.images&&r("Images",x(s.images))]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("strong",{className:"text-gray-700",children:"Current Needs:"}),e.jsx("div",{className:"mt-2",children:p(s.needs)})]})]})]},s.id))})]}),i.martyrs?.filter(s=>s.name).length>0&&e.jsxs(t,{children:[e.jsx(d,{children:e.jsxs(c,{children:["Martyrs (",i.martyrs.filter(s=>s.name).length,")"]})}),e.jsx(o,{children:i.martyrs.filter(s=>s.name).map((s,h)=>e.jsxs(t,{className:"mb-4",children:[e.jsx(d,{children:e.jsxs(c,{className:"text-lg",children:["Martyr ",h+1]})}),e.jsxs(o,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[r("Name",s.name),r("Age",s.age),r("Place of Martyrdom",s.place)]}),e.jsxs("div",{children:[r("Relative Contact",s.relative_contact),s.image&&r("Images",x(s.image))]})]})]},s.id))})]}),i.shelters?.filter(s=>s.place||s.contact||s.displacedFamilies&&s.displacedFamilies.length>0).length>0&&e.jsxs(t,{children:[e.jsx(d,{children:e.jsxs(c,{children:["Shelters (",i.shelters.filter(s=>s.place||s.contact||s.displacedFamilies&&s.displacedFamilies.length>0).length,")"]})}),e.jsx(o,{children:i.shelters.filter(s=>s.place||s.contact||s.displacedFamilies&&s.displacedFamilies.length>0).map((s,h)=>e.jsxs(t,{className:"mb-4",children:[e.jsx(d,{children:e.jsxs(c,{className:"text-lg",children:["Shelter ",h+1]})}),e.jsxs(o,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[r("Place",s.place),r("Contact",s.contact)]}),e.jsx("div",{children:s.images&&r("Images",x(s.images))})]}),s.displacedFamilies?.length>0&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("h4",{className:"font-semibold mb-3",children:["Families in Shelter (",s.displacedFamilies.length,")"]}),s.displacedFamilies.map((n,g)=>e.jsxs(t,{className:"mt-2 mb-2 bg-gray-50",children:[e.jsx(d,{children:e.jsxs(c,{className:"text-md",children:["Family ",g+1]})}),e.jsxs(o,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[r("Individuals Count",n.individuals_count),r("Contact",n.contact),r("Wife Name",n.wife_name),r("Children Info",n.children_info),r("Family Book Number",n.family_book_number),r("Assistance Type",n.assistance_type),r("Provider",n.provider),r("Date Received",n.date_received),r("Notes",n.notes)]}),e.jsxs("div",{children:[r("Return Possible",m(n.return_possible)),r("Previous Assistance",m(n.previous_assistance)),r("Children Under 8 Months",m(n.children_under_8_months)),n.children_under_8_months==="نعم"&&r("Birth Details",n.birth_details),n.images&&r("Images",x(n.images))]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("strong",{className:"text-gray-700",children:"Current Needs:"}),e.jsx("div",{className:"mt-2",children:p(n.needs)})]})]})]},n.id))]})]})]},s.id))})]}),l.length>0&&e.jsxs(t,{children:[e.jsx(d,{children:e.jsxs(c,{children:["All Available Needs (",l.length,")"]})}),e.jsx(o,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:l.map(s=>e.jsx(j,{variant:"outline",className:"justify-center",children:s.name_ar},s.id))})})]})]})]})}export{H as default};
