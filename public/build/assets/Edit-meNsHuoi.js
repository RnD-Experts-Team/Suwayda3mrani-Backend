import{u as T,r as _,j as e,H as P}from"./app-BIiAsSdM.js";import{A as H,X as M}from"./app-layout-j6e297M5.js";import{B as y}from"./button-Ci3GZDdP.js";import{I as f}from"./input-BLSOOD9F.js";import{L as l}from"./label-DsMNS9Ia.js";import{T as U}from"./textarea-BZI4Tc89.js";import{S as B}from"./switch-DTyNRTW6.js";import{C as o,a as x,b as h,c as p}from"./card-BHKFko1u.js";import{B as n}from"./badge-4-t4-OA8.js";import{C as W}from"./checkbox-B0PAlLDD.js";import{B as w,U as k,M as E}from"./users-f_zNWZXi.js";import{U as S}from"./upload-76HWwopm.js";import{E as F}from"./external-link-D-NzQHvm.js";import{T as D}from"./tag-DTHTYKp1.js";/* empty css            */import"./index-DC2lEfLk.js";import"./index-DCH5W3Q5.js";import"./index-C4z22CSr.js";import"./check-BLUgC2N0.js";function me({organization:t,translations:m,categories:u,attachedCategories:v}){const L=[{title:"Aid Organizations",href:"/aid-organizations"},{title:"Edit",href:`/aid-organizations/${t.id}/edit`}],{data:a,setData:i,post:I,processing:C,errors:r}=T({_method:"PUT",name_en:m.name_en||"",name_ar:m.name_ar||"",description_en:m.description_en||"",description_ar:m.description_ar||"",background_image:null,website_url:t.website_url||"",contact_url:t.contact_url||"",type:t.type,is_featured:t.is_featured,is_active:t.is_active,category_ids:v}),[j,O]=_.useState(null),[g,N]=_.useState([]);_.useEffect(()=>{t.background_image_path&&O(`/storage/${t.background_image_path}`);const s=u.filter(d=>v.includes(d.id));N(s)},[t,u,v]);const z=s=>{const d=s.target.files?.[0];if(d){i("background_image",d);const c=new FileReader;c.onload=b=>O(b.target?.result),c.readAsDataURL(d)}},A=(s,d)=>{d?(N(c=>[...c,s]),i("category_ids",[...a.category_ids,s.id])):(N(c=>c.filter(b=>b.id!==s.id)),i("category_ids",a.category_ids.filter(c=>c!==s.id)))},$=s=>{N(d=>d.filter(c=>c.id!==s)),i("category_ids",a.category_ids.filter(d=>d!==s))},R=s=>{s.preventDefault(),I(`/aid-organizations/${t.id}`)};return e.jsxs(H,{breadcrumbs:L,children:[e.jsx(P,{title:`Edit Organization - ${m.name_en||"Untitled"}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:justify-between sm:items-center",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Edit Aid Organization"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Update organization details and content"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{variant:"outline",children:t.organization_id}),e.jsxs(n,{variant:"outline",className:"capitalize gap-1",children:[t.type==="organizations"?e.jsx(w,{className:"w-3 h-3"}):e.jsx(k,{className:"w-3 h-3"}),t.type==="organizations"?"Organization":"Initiative"]}),t.is_featured&&e.jsx(n,{variant:"default",children:"Featured"}),!t.is_active&&e.jsx(n,{variant:"destructive",children:"Inactive"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 max-w-7xl",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(o,{className:"overflow-hidden",children:[e.jsx(x,{className:"px-6 py-4 border-b",children:e.jsx(h,{className:"text-lg font-semibold",children:"Organization Details"})}),e.jsx(p,{className:"p-6",children:e.jsxs("form",{onSubmit:R,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{children:"Organization Type"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsx("button",{type:"button",onClick:()=>i("type","organizations"),className:`p-4 border rounded-lg transition-colors ${a.type==="organizations"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:e.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[e.jsx(w,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:"Organizations"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Formal aid organizations"})]})]})}),e.jsx("button",{type:"button",onClick:()=>i("type","initiatives"),className:`p-4 border rounded-lg transition-colors ${a.type==="initiatives"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:e.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[e.jsx(k,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:"Initiatives"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Community initiatives"})]})]})})]}),r.type&&e.jsx("p",{className:"text-sm text-destructive",children:r.type})]}),t.background_image_path&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{children:"Current Background Image"}),e.jsx("div",{className:"border rounded-lg p-4 bg-muted/30",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-muted rounded overflow-hidden",children:e.jsx("img",{src:`/storage/${t.background_image_path}`,alt:"Current background",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Current background image"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.background_image_path})]})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(l,{children:[t.background_image_path?"Replace Background Image":"Background Image"," (Optional)"]}),e.jsx("div",{className:"border-2 border-dashed border-border rounded-lg p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[j&&a.background_image?e.jsxs("div",{className:"space-y-3",children:[e.jsx("img",{src:j,alt:"New background preview",className:"mx-auto max-h-32 rounded"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["New: ",a.background_image?.name]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{className:"mx-auto h-8 w-8 text-muted-foreground"}),e.jsx("p",{className:"text-sm",children:t.background_image_path?"Upload a new background image to replace the current one":"Upload a background image"})]}),e.jsx("input",{type:"file",onChange:z,accept:"image/*",className:"sr-only",id:"background-upload"}),e.jsxs(l,{htmlFor:"background-upload",className:"cursor-pointer inline-flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:[e.jsx(S,{className:"w-4 h-4"}),t.background_image_path?"Replace Background":"Choose Background"]})]})}),r.background_image&&e.jsx("p",{className:"text-sm text-destructive",children:r.background_image})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground uppercase tracking-wide",children:"Content"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-sm text-muted-foreground",children:"English Content"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"name_en",children:"Name *"}),e.jsx(f,{id:"name_en",type:"text",placeholder:"Enter English name",value:a.name_en,onChange:s=>i("name_en",s.target.value),className:r.name_en?"border-destructive":""}),r.name_en&&e.jsx("p",{className:"text-sm text-destructive",children:r.name_en})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"description_en",children:"Description *"}),e.jsx(U,{id:"description_en",placeholder:"Enter English description",value:a.description_en,onChange:s=>i("description_en",s.target.value),rows:6,className:r.description_en?"border-destructive":""}),r.description_en&&e.jsx("p",{className:"text-sm text-destructive",children:r.description_en})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-sm text-muted-foreground",children:"Arabic Content"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"name_ar",children:"Name *"}),e.jsx(f,{id:"name_ar",type:"text",placeholder:"أدخل الاسم بالعربية",value:a.name_ar,onChange:s=>i("name_ar",s.target.value),className:r.name_ar?"border-destructive":"",dir:"rtl"}),r.name_ar&&e.jsx("p",{className:"text-sm text-destructive",children:r.name_ar})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"description_ar",children:"Description *"}),e.jsx(U,{id:"description_ar",placeholder:"أدخل الوصف بالعربية",value:a.description_ar,onChange:s=>i("description_ar",s.target.value),rows:6,className:r.description_ar?"border-destructive":"",dir:"rtl"}),r.description_ar&&e.jsx("p",{className:"text-sm text-destructive",children:r.description_ar})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground uppercase tracking-wide",children:"External Links"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"website_url",children:"Website URL (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(F,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(f,{id:"website_url",type:"url",placeholder:"https://organization-website.com",value:a.website_url,onChange:s=>i("website_url",s.target.value),className:`pl-10 ${r.website_url?"border-destructive":""}`})]}),r.website_url&&e.jsx("p",{className:"text-sm text-destructive",children:r.website_url})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"contact_url",children:"Contact URL (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(E,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(f,{id:"contact_url",type:"url",placeholder:"mailto:contact@org.com or contact form URL",value:a.contact_url,onChange:s=>i("contact_url",s.target.value),className:`pl-10 ${r.contact_url?"border-destructive":""}`})]}),r.contact_url&&e.jsx("p",{className:"text-sm text-destructive",children:r.contact_url})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 py-2",children:[e.jsx(B,{checked:a.is_featured,onCheckedChange:s=>i("is_featured",s)}),e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-medium leading-none",children:"Featured Organization"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Show this organization on the home page"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 py-2",children:[e.jsx(B,{checked:a.is_active,onCheckedChange:s=>i("is_active",s)}),e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-medium leading-none",children:"Active"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Make this organization visible on the site"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(y,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:"Cancel"}),e.jsx(y,{type:"submit",disabled:C,className:"gap-2",children:C?"Updating...":"Update Organization"})]})]})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(o,{children:[e.jsx(x,{className:"px-6 py-4 border-b",children:e.jsx(h,{className:"text-lg font-semibold",children:"Preview"})}),e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-[4/3] bg-muted rounded-lg flex items-center justify-center",children:j?e.jsx("img",{src:j,alt:"Background preview",className:"w-full h-full object-cover rounded-lg"}):e.jsxs("div",{className:"text-center text-muted-foreground",children:[a.type==="initiatives"?e.jsx(k,{className:"mx-auto w-8 h-8 mb-2"}):e.jsx(w,{className:"mx-auto w-8 h-8 mb-2"}),e.jsx("p",{className:"text-sm",children:"No background image"})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{variant:"outline",className:"text-xs capitalize",children:a.type==="organizations"?"Organization":"Initiative"}),e.jsx("h3",{className:"font-medium text-sm",children:a.name_en||"Organization name will appear here"}),a.description_en&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-3",children:a.description_en})]}),(a.website_url||a.contact_url)&&e.jsxs("div",{className:"flex gap-1 pt-2 border-t",children:[a.website_url&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(F,{className:"w-3 h-3"}),"Website"]}),a.contact_url&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(E,{className:"w-3 h-3"}),"Contact"]})]}),e.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Featured:"}),e.jsx("span",{children:a.is_featured?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Active:"}),e.jsx("span",{children:a.is_active?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Categories:"}),e.jsxs("span",{children:[g.length," selected"]})]})]})]})})]}),g.length>0&&e.jsxs(o,{children:[e.jsx(x,{className:"px-6 py-4 border-b",children:e.jsxs(h,{className:"text-lg font-semibold",children:["Selected Categories (",g.length,")"]})}),e.jsx(p,{className:"p-6",children:e.jsx("div",{className:"space-y-2",children:g.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.slug})]}),e.jsx(y,{type:"button",variant:"outline",size:"sm",onClick:()=>$(s.id),className:"h-8 w-8 p-0",children:e.jsx(M,{className:"w-4 h-4"})})]},s.id))})})]}),e.jsxs(o,{children:[e.jsxs(x,{className:"px-6 py-4 border-b",children:[e.jsxs(h,{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4"}),"Categories"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select categories that apply to this organization"})]}),e.jsx(p,{className:"p-6",children:e.jsx("div",{className:"space-y-3",children:u.length>0?u.map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-2",children:[e.jsx(W,{checked:a.category_ids.includes(s.id),onCheckedChange:d=>A(s,!!d)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{variant:"outline",className:"text-xs",children:s.slug}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.name_ar})]})]})]},s.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(D,{className:"mx-auto w-8 h-8 text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No categories available. Create some categories first."})]})})})]}),e.jsxs(o,{children:[e.jsx(x,{className:"px-6 py-4 border-b",children:e.jsx(h,{className:"text-lg font-semibold",children:"Organization Info"})}),e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"ID:"}),e.jsx("span",{className:"font-mono",children:t.organization_id})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Created:"}),e.jsx("span",{children:new Date(t.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Updated:"}),e.jsx("span",{children:new Date(t.updated_at).toLocaleDateString()})]})]})})]})]})]})]})]})}export{me as default};
