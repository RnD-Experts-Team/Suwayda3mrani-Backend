import{r,a as x,j as e,H as Ie,L as p}from"./app-kFe3W52v.js";import{A as ze}from"./app-layout-CeMAjsTz.js";import{B as t}from"./button-CjP7rKh3.js";import{I as Ve}from"./input-BgsbDBET.js";import{S as z,a as V,b as P,c as B,d as c}from"./select-oXQEokxY.js";import{B as j}from"./badge-f65TfQO7.js";import{C as g,a as Pe,b as Be,c as N}from"./card-C2Q4dehj.js";import{C as L}from"./checkbox-BKqEJ5F5.js";import{A as le,a as re,b as ne,c as ce,d as ie,e as de,f as oe,g as me}from"./alert-dialog-DS3D93Mr.js";import{P as Le,a as Me,b as $e,c as Oe,d as Ee,e as Re}from"./pagination-00dvCoQg.js";import{T as S}from"./trash-2-C_sWwEww.js";import{P as ue}from"./plus-CNZpktWk.js";import{F as Ue}from"./filter-JjIGzD36.js";import{R as he}from"./rotate-ccw-CUpgzOHS.js";import{S as xe}from"./search-CCKJ6W69.js";import{S as pe,a as je}from"./star-BEhyOQjL.js";import{V as C}from"./video-BjFbVYHU.js";import{I as k}from"./image-g7Ln0GRp.js";import{E as fe}from"./eye-BaSUxmf4.js";import{S as ge}from"./square-pen-D52l7do5.js";import{L as He}from"./link-I3w9hqxo.js";import{D as qe}from"./database-CHnMa7MZ.js";import{U as Ge}from"./upload-CvK2Jdnd.js";/* empty css            */import"./index-DM-IqmN2.js";import"./index-DGqGJZ-A.js";import"./index-CMYKVjK-.js";import"./check-tbrJmj50.js";import"./chevron-left-50bH4gFX.js";const We=[{title:"Media",href:"/media"}];function ws(Ne){const{media:d=null,filters:ve=null}=Ne||{},l={data:d?.data||[],links:d?.links||[],meta:{current_page:d?.current_page||1,last_page:d?.last_page||1,per_page:d?.per_page||12,total:d?.total||0,from:d?.from||null,to:d?.to||null}},v=ve||{},[o,M]=r.useState(v.search||""),[_,$]=r.useState(v.type||"__all__"),[y,O]=r.useState(v.source_type||"__all__"),[w,E]=r.useState(v.featured||"__all__"),[n,f]=r.useState([]),[_e,D]=r.useState(!1),[ye,F]=r.useState(!1),[R,U]=r.useState(null),[A,H]=r.useState("grid"),[we,be]=r.useState(!0);r.useEffect(()=>{if(we){be(!1);return}const s=setTimeout(()=>{q()},300);return()=>clearTimeout(s)},[o]);const m=s=>s==="__all__"?"":s,q=()=>{const s={};o?.trim()&&(s.search=o.trim());const a=m(_);a&&(s.type=a);const i=m(y);i&&(s.source_type=i);const h=m(w);h&&(s.featured=h),x.get("/media",Object.keys(s).length>0?s:{},{preserveState:!0,preserveScroll:!0})},T=(s={})=>{const a={},i=s.search!==void 0?s.search:o,h=s.type!==void 0?s.type:_,Ae=s.source_type!==void 0?s.source_type:y,Te=s.featured!==void 0?s.featured:w;i?.trim()&&(a.search=i.trim());const se=m(h);se&&(a.type=se);const ae=m(Ae);ae&&(a.source_type=ae);const te=m(Te);te&&(a.featured=te),x.get("/media",Object.keys(a).length>0?a:{},{preserveState:!0,preserveScroll:!0})},G=()=>{M(""),$("__all__"),O("__all__"),E("__all__"),x.get("/media")},Se=s=>{s&&l.data.length>0?f(l.data.map(a=>a.id)):f([])},W=(s,a)=>{f(a?i=>[...i,s]:i=>i.filter(h=>h!==s))},J=s=>{U(s),D(!0)},Ce=()=>{R&&x.delete(`/media/${R}`),D(!1),U(null)},K=()=>{F(!0)},ke=()=>{n.length>0&&x.post("/media/bulk-delete",{ids:n}),F(!1),f([])},Q=s=>{x.patch(`/media/${s.id}/toggle-featured`,{},{preserveState:!0,preserveScroll:!0})},X=s=>{switch(s){case"upload":return e.jsx(Ge,{className:"w-4 h-4"});case"google_drive":return e.jsx(qe,{className:"w-4 h-4"});case"external_link":return e.jsx(He,{className:"w-4 h-4"});default:return null}},Y=s=>{switch(s){case"upload":return"default";case"google_drive":return"secondary";case"external_link":return"outline";default:return"default"}},u=!!(o?.trim()||_!=="__all__"||y!=="__all__"||w!=="__all__");l.data.length>0;const I=l.meta.total===0,b=l.meta.total,Z=l.meta.from,ee=l.meta.to,De=()=>I&&!u?"No media items found. Upload your first media to get started.":I&&u?"No results match your current filters.":Z&&ee?`Showing ${Z} to ${ee} of ${b} results`:b>0?`${b} media item${b!==1?"s":""}`:"Loading media...",Fe=()=>e.jsx(g,{className:"overflow-hidden",children:e.jsx(N,{className:"py-16",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-muted rounded-full flex items-center justify-center",children:e.jsx(k,{className:"w-8 h-8 text-muted-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:u?"No media found":"No media yet"}),e.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:u?"Try adjusting your filters to find what you're looking for.":"Upload your first image or video to get started."})]}),e.jsxs("div",{className:"flex justify-center gap-2 pt-4",children:[u&&e.jsxs(t,{variant:"outline",onClick:G,className:"gap-2",children:[e.jsx(he,{className:"w-4 h-4"}),"Clear Filters"]}),e.jsx(p,{href:"/media/create",children:e.jsxs(t,{className:"gap-2",children:[e.jsx(ue,{className:"w-4 h-4"}),"Add Media"]})})]})]})})});return e.jsxs(ze,{breadcrumbs:We,children:[e.jsx(Ie,{title:"Media"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:justify-between sm:items-center",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Media Library"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:De()})]}),e.jsxs("div",{className:"flex gap-2",children:[n.length>0&&e.jsxs(t,{variant:"destructive",onClick:K,size:"sm",className:"gap-2",children:[e.jsx(S,{className:"w-4 h-4"}),"Delete Selected (",n.length,")"]}),e.jsx(p,{href:"/media/create",children:e.jsxs(t,{size:"sm",className:"gap-2",children:[e.jsx(ue,{className:"w-4 h-4"}),"Add Media"]})})]})]}),e.jsxs(g,{className:"overflow-hidden",children:[e.jsx(Pe,{className:"px-6 py-4 border-b",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-4 h-4 text-muted-foreground"}),e.jsx(Be,{className:"text-lg font-semibold",children:"Filters"})]}),e.jsxs("div",{className:"flex gap-2",children:[u&&e.jsxs(t,{variant:"outline",size:"sm",onClick:G,className:"gap-2",children:[e.jsx(he,{className:"w-4 h-4"}),"Clear Filters"]}),e.jsxs("div",{className:"flex gap-1 border rounded-md p-1",children:[e.jsx(t,{variant:A==="grid"?"default":"ghost",size:"sm",onClick:()=>H("grid"),className:"h-8 w-8 p-0",children:e.jsxs("div",{className:"grid grid-cols-2 gap-0.5 w-3 h-3",children:[e.jsx("div",{className:"bg-current rounded-sm"}),e.jsx("div",{className:"bg-current rounded-sm"}),e.jsx("div",{className:"bg-current rounded-sm"}),e.jsx("div",{className:"bg-current rounded-sm"})]})}),e.jsx(t,{variant:A==="list"?"default":"ghost",size:"sm",onClick:()=>H("list"),className:"h-8 w-8 p-0",children:e.jsxs("div",{className:"flex flex-col gap-0.5 w-3",children:[e.jsx("div",{className:"bg-current h-0.5 rounded"}),e.jsx("div",{className:"bg-current h-0.5 rounded"}),e.jsx("div",{className:"bg-current h-0.5 rounded"})]})})]})]})]})}),e.jsx(N,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(Ve,{type:"text",placeholder:"Search media...",value:o,onChange:s=>M(s.target.value),className:"pl-10"})]}),e.jsxs(z,{value:_,onValueChange:s=>{$(s),T({type:s})},children:[e.jsx(V,{children:e.jsx(P,{placeholder:"All Types"})}),e.jsxs(B,{children:[e.jsx(c,{value:"__all__",children:"All Types"}),e.jsx(c,{value:"image",children:"Images"}),e.jsx(c,{value:"video",children:"Videos"})]})]}),e.jsxs(z,{value:y,onValueChange:s=>{O(s),T({source_type:s})},children:[e.jsx(V,{children:e.jsx(P,{placeholder:"All Sources"})}),e.jsxs(B,{children:[e.jsx(c,{value:"__all__",children:"All Sources"}),e.jsx(c,{value:"upload",children:"Uploads"}),e.jsx(c,{value:"google_drive",children:"Google Drive"}),e.jsx(c,{value:"external_link",children:"External Links"})]})]}),e.jsxs(z,{value:w,onValueChange:s=>{E(s),T({featured:s})},children:[e.jsx(V,{children:e.jsx(P,{placeholder:"All Items"})}),e.jsxs(B,{children:[e.jsx(c,{value:"__all__",children:"All Items"}),e.jsx(c,{value:"true",children:"Featured Only"}),e.jsx(c,{value:"false",children:"Not Featured"})]})]}),e.jsxs(t,{onClick:q,className:"gap-2",children:[e.jsx(xe,{className:"w-4 h-4"}),"Search"]})]})})]}),I?e.jsx(Fe,{}):e.jsxs(e.Fragment,{children:[n.length>0&&e.jsx(g,{children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{checked:n.length===l.data.length&&l.data.length>0,onCheckedChange:Se}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[n.length," of ",l.data.length," selected"]})]}),e.jsxs(t,{variant:"destructive",size:"sm",onClick:K,className:"gap-2",children:[e.jsx(S,{className:"w-4 h-4"}),"Delete Selected"]})]})})}),A==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:l.data.map(s=>e.jsxs(g,{className:"overflow-hidden group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-2 left-2 z-10",children:e.jsx(L,{checked:n.includes(s.id),onCheckedChange:a=>W(s.id,!!a)})}),e.jsx("button",{onClick:()=>Q(s),className:"absolute top-2 right-2 z-10 p-1 rounded-full bg-black/50 text-white opacity-0 group-hover:opacity-100 transition-opacity",children:s.featured_on_home?e.jsx(pe,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}):e.jsx(je,{className:"w-4 h-4"})}),e.jsx("div",{className:"aspect-video bg-muted flex items-center justify-center",children:s.translated_content?.thumbnail||s.translated_content?.url?e.jsx("img",{src:s.translated_content.thumbnail||s.translated_content.url,alt:s.translated_content?.title?.en||"Media",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[s.type==="video"?e.jsx(C,{className:"w-8 h-8"}):e.jsx(k,{className:"w-8 h-8"}),e.jsx("span",{className:"text-xs",children:"No preview"})]})}),s.type==="video"&&e.jsx("div",{className:"absolute bottom-2 left-2",children:e.jsxs(j,{variant:"secondary",className:"gap-1",children:[e.jsx(C,{className:"w-3 h-3"}),"Video"]})})]}),e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium text-sm truncate",children:s.translated_content?.title?.en||"Untitled"}),e.jsxs(j,{variant:Y(s.source_type),className:"gap-1 text-xs",children:[X(s.source_type),s.source_type.replace("_"," ")]})]}),s.translated_content?.description?.en&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:s.translated_content.description.en}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx(p,{href:`/media/${s.id}`,children:e.jsx(t,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(fe,{className:"w-4 h-4"})})}),e.jsx(p,{href:`/media/${s.id}/edit`,children:e.jsx(t,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(ge,{className:"w-4 h-4"})})}),e.jsx(t,{variant:"outline",size:"sm",onClick:()=>J(s.id),className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:e.jsx(S,{className:"w-4 h-4"})})]}),s.featured_on_home&&e.jsx(j,{variant:"default",className:"text-xs",children:"Featured"})]})]})})]},s.id))}):e.jsx(g,{className:"overflow-hidden",children:e.jsx(N,{className:"p-0",children:e.jsx("div",{className:"divide-y",children:l.data.map(s=>e.jsxs("div",{className:"p-4 flex items-center gap-4 hover:bg-muted/50",children:[e.jsx(L,{checked:n.includes(s.id),onCheckedChange:a=>W(s.id,!!a)}),e.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center overflow-hidden",children:s.translated_content?.thumbnail||s.translated_content?.url?e.jsx("img",{src:s.translated_content.thumbnail||s.translated_content.url,alt:s.translated_content?.title?.en||"Media",className:"w-full h-full object-cover"}):s.type==="video"?e.jsx(C,{className:"w-6 h-6 text-muted-foreground"}):e.jsx(k,{className:"w-6 h-6 text-muted-foreground"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-medium truncate",children:s.translated_content?.title?.en||"Untitled"}),e.jsxs(j,{variant:"outline",className:"gap-1",children:[s.type==="video"?e.jsx(C,{className:"w-3 h-3"}):e.jsx(k,{className:"w-3 h-3"}),s.type]}),e.jsxs(j,{variant:Y(s.source_type),className:"gap-1",children:[X(s.source_type),s.source_type.replace("_"," ")]}),s.featured_on_home&&e.jsx(j,{variant:"default",children:"Featured"})]}),s.translated_content?.description?.en&&e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:s.translated_content.description.en})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Q(s),className:"p-1 rounded hover:bg-muted",children:s.featured_on_home?e.jsx(pe,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}):e.jsx(je,{className:"w-4 h-4 text-muted-foreground"})}),e.jsx(p,{href:`/media/${s.id}`,children:e.jsx(t,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(fe,{className:"w-4 h-4"})})}),e.jsx(p,{href:`/media/${s.id}/edit`,children:e.jsx(t,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(ge,{className:"w-4 h-4"})})}),e.jsx(t,{variant:"outline",size:"sm",onClick:()=>J(s.id),className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:e.jsx(S,{className:"w-4 h-4"})})]})]},s.id))})})}),l.meta.last_page>1&&e.jsx("div",{className:"flex justify-center",children:e.jsx(Le,{children:e.jsx(Me,{children:l.links.map((s,a)=>e.jsx($e,{children:s.label==="&laquo; Previous"?e.jsx(Oe,{href:s.url||"#",className:s.url?"":"pointer-events-none opacity-50"}):s.label==="Next &raquo;"?e.jsx(Ee,{href:s.url||"#",className:s.url?"":"pointer-events-none opacity-50"}):e.jsx(Re,{href:s.url||"#",isActive:s.active,className:s.url?"":"pointer-events-none opacity-50",children:s.label})},a))})})})]})]}),e.jsx(le,{open:_e,onOpenChange:D,children:e.jsxs(re,{children:[e.jsxs(ne,{children:[e.jsx(ce,{children:"Are you sure?"}),e.jsx(ie,{children:"This action cannot be undone. This will permanently delete the media item and all associated files."})]}),e.jsxs(de,{children:[e.jsx(oe,{children:"Cancel"}),e.jsx(me,{onClick:Ce,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),e.jsx(le,{open:ye,onOpenChange:F,children:e.jsxs(re,{children:[e.jsxs(ne,{children:[e.jsxs(ce,{children:["Delete ",n.length," media items?"]}),e.jsx(ie,{children:"This action cannot be undone. This will permanently delete the selected media items and all associated files."})]}),e.jsxs(de,{children:[e.jsx(oe,{children:"Cancel"}),e.jsx(me,{onClick:ke,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete All"})]})]})})]})}export{ws as default};
