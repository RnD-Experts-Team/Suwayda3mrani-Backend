import{u as P,r as N,j as e,H as V}from"./app-BIiAsSdM.js";import{A as O}from"./app-layout-j6e297M5.js";import{B as U}from"./button-Ci3GZDdP.js";import{I as u}from"./input-BLSOOD9F.js";import{L as l}from"./label-DsMNS9Ia.js";import{T}from"./textarea-BZI4Tc89.js";import{S as H,a as z,b as G,c as Y,d as M}from"./select-26GbXy3u.js";import{S as L}from"./switch-DTyNRTW6.js";import{C as y,a as b,b as w,c as C}from"./card-BHKFko1u.js";import{B as F}from"./badge-4-t4-OA8.js";import{V as S}from"./video-jl_Sz5DI.js";import{I as g}from"./image-ClR3yXMd.js";import{E as q}from"./external-link-D-NzQHvm.js";import{U as j}from"./upload-76HWwopm.js";import{L as K}from"./link-a2ITSpEj.js";import{D as W}from"./database-BT1Y5hp8.js";/* empty css            */import"./index-DC2lEfLk.js";import"./index-DCH5W3Q5.js";import"./index-C4z22CSr.js";import"./check-BLUgC2N0.js";function je({media:d,translations:h}){const t={...d,type:d.type||"image",source_type:d.source_type||"upload",is_active:d.is_active??!0,featured_on_home:d.featured_on_home??!1,sort_order:d.sort_order??0,media_id:d.media_id||"",google_drive_id:d.google_drive_id||"",external_url:d.external_url||"",source_url:d.source_url||""},o={title_en:h?.title_en||"",title_ar:h?.title_ar||"",description_en:h?.description_en||"",description_ar:h?.description_ar||""},A=[{title:"Media",href:"/media"},{title:"Edit",href:`/media/${t.id}/edit`}],{data:a,setData:i,post:I,processing:k,errors:r}=P({_method:"PUT",type:t.type,source_type:t.source_type,file:null,google_drive_id:t.google_drive_id,external_url:t.external_url,thumbnail:null,title_en:o.title_en,title_ar:o.title_ar,description_en:o.description_en,description_ar:o.description_ar,source_url:t.source_url,featured_on_home:t.featured_on_home,is_active:t.is_active}),[n,m]=N.useState(null),[x,D]=N.useState(null);N.useEffect(()=>{t.file_path?m(`/storage/${t.file_path}`):t.source_type==="google_drive"&&t.google_drive_id?m(`https://drive.google.com/uc?id=${t.google_drive_id}`):t.external_url&&m(t.external_url),t.thumbnail_path&&D(`/storage/${t.thumbnail_path}`)},[t]);const R=s=>{const c=s.target.files?.[0];if(c)if(i("file",c),c.type.startsWith("image/")){const p=new FileReader;p.onload=v=>m(v.target?.result),p.readAsDataURL(c)}else m(null)},$=s=>{const c=s.target.files?.[0];if(c){i("thumbnail",c);const p=new FileReader;p.onload=v=>D(v.target?.result),p.readAsDataURL(c)}},B=s=>{s.preventDefault(),I(`/media/${t.id}`)},E=s=>{switch(s){case"upload":return e.jsx(j,{className:"w-5 h-5"});case"google_drive":return e.jsx(W,{className:"w-5 h-5"});case"external_link":return e.jsx(K,{className:"w-5 h-5"});default:return null}},_=s=>s.replace("_"," "),f=()=>t.file_path?`/storage/${t.file_path}`:t.source_type==="google_drive"&&a.google_drive_id?`https://drive.google.com/uc?id=${a.google_drive_id}`:a.external_url?a.external_url:null;return e.jsxs(O,{breadcrumbs:A,children:[e.jsx(V,{title:`Edit Media - ${o.title_en||"Untitled"}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:justify-between sm:items-center",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Edit Media"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Update media details and content"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(F,{variant:"outline",className:"gap-1",children:[t.type==="video"?e.jsx(S,{className:"w-3 h-3"}):e.jsx(g,{className:"w-3 h-3"}),t.type]}),e.jsxs(F,{variant:"secondary",className:"gap-1",children:[E(t.source_type),_(t.source_type)]}),t.featured_on_home&&e.jsx(F,{variant:"default",children:"Featured"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 max-w-6xl",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(y,{className:"overflow-hidden",children:[e.jsx(b,{className:"px-6 py-4 border-b",children:e.jsx(w,{className:"text-lg font-semibold",children:"Media Details"})}),e.jsx(C,{className:"p-6",children:e.jsxs("form",{onSubmit:B,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{children:"Media Type"}),e.jsxs(H,{value:a.type,onValueChange:s=>i("type",s),children:[e.jsx(z,{className:r.type?"border-destructive":"",children:e.jsx(G,{placeholder:"Select media type"})}),e.jsxs(Y,{children:[e.jsx(M,{value:"image",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4"}),"Image"]})}),e.jsx(M,{value:"video",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4"}),"Video"]})})]})]}),r.type&&e.jsx("p",{className:"text-sm text-destructive",children:r.type})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{children:"Source Type"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:["upload","google_drive","external_link"].map(s=>e.jsx("button",{type:"button",onClick:()=>i("source_type",s),className:`p-4 border rounded-lg transition-colors ${a.source_type===s?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:e.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[E(s),e.jsx("div",{className:"font-medium text-sm capitalize",children:_(s)})]})},s))})]}),f()&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{children:"Current Media"}),e.jsx("div",{className:"border rounded-lg p-4 bg-muted/30",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-muted rounded overflow-hidden",children:n&&e.jsx("img",{src:n,alt:"Current media",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:t.source_type==="upload"?"Uploaded file":t.source_type==="google_drive"?"Google Drive file":"External link"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:f()})]}),e.jsx("a",{href:f(),target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded hover:bg-muted",children:e.jsx(q,{className:"w-4 h-4"})})]})})]}),a.source_type==="upload"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{children:"Replace File (Optional)"}),e.jsx("div",{className:"border-2 border-dashed border-border rounded-lg p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[n&&a.file?e.jsxs("div",{className:"space-y-3",children:[e.jsx("img",{src:n,alt:"New preview",className:"mx-auto max-h-32 rounded"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["New file: ",a.file?.name]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{className:"mx-auto h-8 w-8 text-muted-foreground"}),e.jsx("p",{className:"text-sm",children:"Upload a new file to replace the current one"})]}),e.jsx("input",{type:"file",onChange:R,accept:a.type==="image"?"image/*":"video/*",className:"sr-only",id:"file-upload"}),e.jsxs(l,{htmlFor:"file-upload",className:"cursor-pointer inline-flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:[e.jsx(j,{className:"w-4 h-4"}),"Choose New File"]})]})}),r.file&&e.jsx("p",{className:"text-sm text-destructive",children:r.file})]}),a.source_type==="google_drive"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"google_drive_id",children:"Google Drive File ID"}),e.jsx(u,{id:"google_drive_id",type:"text",placeholder:"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",value:a.google_drive_id,onChange:s=>i("google_drive_id",s.target.value),className:r.google_drive_id?"border-destructive":""}),r.google_drive_id&&e.jsx("p",{className:"text-sm text-destructive",children:r.google_drive_id})]}),a.source_type==="external_link"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"external_url",children:"External URL"}),e.jsx(u,{id:"external_url",type:"url",placeholder:"https://example.com/image.jpg",value:a.external_url,onChange:s=>i("external_url",s.target.value),className:r.external_url?"border-destructive":""}),r.external_url&&e.jsx("p",{className:"text-sm text-destructive",children:r.external_url})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{children:"Thumbnail"}),e.jsx("div",{className:"border border-border rounded-lg p-4",children:e.jsxs("div",{className:"text-center space-y-3",children:[x?e.jsxs("div",{className:"space-y-2",children:[e.jsx("img",{src:x,alt:"Thumbnail",className:"mx-auto max-h-20 rounded"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.thumbnail?.name||"Current thumbnail"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{className:"mx-auto h-6 w-6 text-muted-foreground"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"No thumbnail set"})]}),e.jsx("input",{type:"file",onChange:$,accept:"image/*",className:"sr-only",id:"thumbnail-upload"}),e.jsxs(l,{htmlFor:"thumbnail-upload",className:"cursor-pointer inline-flex items-center gap-2 px-3 py-1 bg-secondary text-secondary-foreground rounded hover:bg-secondary/80 text-sm",children:[e.jsx(j,{className:"w-3 h-3"}),x?"Change Thumbnail":"Add Thumbnail"]})]})}),r.thumbnail&&e.jsx("p",{className:"text-sm text-destructive",children:r.thumbnail})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground uppercase tracking-wide",children:"English Content"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"title_en",children:"Title"}),e.jsx(u,{id:"title_en",type:"text",placeholder:"Enter English title",value:a.title_en,onChange:s=>i("title_en",s.target.value),className:r.title_en?"border-destructive":""}),r.title_en&&e.jsx("p",{className:"text-sm text-destructive",children:r.title_en})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"description_en",children:"Description (Optional)"}),e.jsx(T,{id:"description_en",placeholder:"Enter English description",value:a.description_en,onChange:s=>i("description_en",s.target.value),rows:3})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground uppercase tracking-wide",children:"Arabic Content"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"title_ar",children:"Title"}),e.jsx(u,{id:"title_ar",type:"text",placeholder:"أدخل العنوان بالعربية",value:a.title_ar,onChange:s=>i("title_ar",s.target.value),className:r.title_ar?"border-destructive":"",dir:"rtl"}),r.title_ar&&e.jsx("p",{className:"text-sm text-destructive",children:r.title_ar})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"description_ar",children:"Description (Optional)"}),e.jsx(T,{id:"description_ar",placeholder:"أدخل الوصف بالعربية",value:a.description_ar,onChange:s=>i("description_ar",s.target.value),rows:3,dir:"rtl"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{htmlFor:"source_url",children:"Source URL (Optional)"}),e.jsx(u,{id:"source_url",type:"url",placeholder:"https://example.com/original-source",value:a.source_url,onChange:s=>i("source_url",s.target.value)})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 py-2",children:[e.jsx(L,{checked:a.featured_on_home,onCheckedChange:s=>i("featured_on_home",s)}),e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-medium leading-none",children:"Featured on Home"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Show this media in the home page gallery"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 py-2",children:[e.jsx(L,{checked:a.is_active,onCheckedChange:s=>i("is_active",s)}),e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-medium leading-none",children:"Active"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Make this media visible throughout the site"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(U,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:"Cancel"}),e.jsx(U,{type:"submit",disabled:k,className:"gap-2",children:k?"Updating...":"Update Media"})]})]})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(y,{children:[e.jsx(b,{className:"px-6 py-4 border-b",children:e.jsx(w,{className:"text-lg font-semibold",children:"Preview"})}),e.jsx(C,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-video bg-muted rounded-lg flex items-center justify-center",children:n||x?e.jsx("img",{src:n||x||"",alt:"Preview",className:"w-full h-full object-cover rounded-lg"}):e.jsxs("div",{className:"text-center text-muted-foreground",children:[a.type==="video"?e.jsx(S,{className:"mx-auto w-8 h-8 mb-2"}):e.jsx(g,{className:"mx-auto w-8 h-8 mb-2"}),e.jsx("p",{className:"text-sm",children:"No preview available"})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-medium text-sm",children:a.title_en||"Title will appear here"}),a.description_en&&e.jsx("p",{className:"text-xs text-muted-foreground",children:a.description_en})]}),e.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Type:"}),e.jsx("span",{className:"capitalize",children:a.type})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Source:"}),e.jsx("span",{className:"capitalize",children:_(a.source_type)})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Featured:"}),e.jsx("span",{children:a.featured_on_home?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Active:"}),e.jsx("span",{children:a.is_active?"Yes":"No"})]})]})]})})]}),e.jsxs(y,{children:[e.jsx(b,{className:"px-6 py-4 border-b",children:e.jsx(w,{className:"text-lg font-semibold",children:"Media Info"})}),e.jsx(C,{className:"p-6",children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"ID:"}),e.jsx("span",{className:"font-mono",children:t.media_id})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Created:"}),e.jsx("span",{children:t.created_at?new Date(t.created_at).toLocaleDateString():"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Updated:"}),e.jsx("span",{children:t.updated_at?new Date(t.updated_at).toLocaleDateString():"N/A"})]})]})})]})]})]})]})]})}export{je as default};
