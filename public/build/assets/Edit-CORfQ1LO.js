import{u as M,r as b,j as e,H as B}from"./app-DN9RV__Q.js";import{A as H,X as U}from"./app-layout-DxMtDWRq.js";import{B as f}from"./button-D_5DhwUH.js";import{I as j}from"./input-eiE76Ome.js";import{L as c}from"./label-CHJ_rNGA.js";import{T as y}from"./textarea-CCmKOTgz.js";import{S as I}from"./switch-BdQw5nn3.js";import{C as n,a as o,b as x,c as m}from"./card-j2w5etHN.js";import{B as u}from"./badge-D2O2XcS6.js";import{C as L}from"./checkbox-sC94O9Lg.js";import{C as _}from"./calendar-Dq1zu30a.js";import{I as N}from"./image-B5Xu26Jo.js";import{F as $}from"./file-text-D5xZcyXs.js";import{V as P}from"./video-BqDue935.js";/* empty css            */import"./index-C6nulwC9.js";import"./index-DiJLFeac.js";import"./index-CdGWDYG6.js";import"./check-BlzswjXE.js";function ae({timelineEvent:i,mediaItems:g}){const w=[{title:"Timeline Events",href:"/timeline-events"},{title:i.title.en||"Timeline Event",href:`/timeline-events/${i.id}`},{title:"Edit",href:`/timeline-events/${i.id}/edit`}],{data:t,setData:r,put:C,processing:v,errors:a}=M({_method:"PUT",period:i.period||"",is_highlighted:i.is_highlighted||!1,sort_order:i.sort_order||0,media_ids:i.media?.map(s=>s.id)||[],title:{en:i.title?.en||"",ar:i.title?.ar||""},description:{en:i.description?.en||"",ar:i.description?.ar||""}}),[h,p]=b.useState([]);b.useEffect(()=>{i.media&&p(i.media)},[i.media]);const S=(s,d)=>{d?(p(l=>[...l,s]),r("media_ids",[...t.media_ids,s.id])):(p(l=>l.filter(F=>F.id!==s.id)),r("media_ids",t.media_ids.filter(l=>l!==s.id)))},T=s=>{p(d=>d.filter(l=>l.id!==s)),r("media_ids",t.media_ids.filter(d=>d!==s))},k=s=>{switch(s){case"image":return e.jsx(N,{className:"w-4 h-4"});case"video":return e.jsx(P,{className:"w-4 h-4"});default:return e.jsx($,{className:"w-4 h-4"})}},D=s=>{s.preventDefault(),C(`/timeline-events/${i.id}`)};return e.jsxs(H,{breadcrumbs:w,children:[e.jsx(B,{title:`Edit - ${i.title?.en||"Timeline Event"}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:justify-between sm:items-center",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Edit Timeline Event"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Update timeline event details and content"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{variant:"outline",children:i.timeline_event_id}),i.is_highlighted&&e.jsx(u,{variant:"default",children:"Highlighted"}),!i.is_active&&e.jsx(u,{variant:"destructive",children:"Inactive"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 max-w-7xl",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(n,{className:"overflow-hidden",children:[e.jsx(o,{className:"px-6 py-4 border-b",children:e.jsx(x,{className:"text-lg font-semibold",children:"Event Details"})}),e.jsx(m,{className:"p-6",children:e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground uppercase tracking-wide",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{htmlFor:"period",children:"Period *"}),e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(j,{id:"period",type:"text",placeholder:"e.g., 1980s - 1990, 1994, 2000-2010",value:t.period,onChange:s=>r("period",s.target.value),className:`pl-10 ${a.period?"border-destructive":""}`})]}),a.period&&e.jsx("p",{className:"text-sm text-destructive",children:a.period})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{htmlFor:"sort_order",children:"Sort Order"}),e.jsx(j,{id:"sort_order",type:"number",placeholder:"0",value:t.sort_order,onChange:s=>r("sort_order",parseInt(s.target.value)||0),className:a.sort_order?"border-destructive":""}),a.sort_order&&e.jsx("p",{className:"text-sm text-destructive",children:a.sort_order})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground uppercase tracking-wide",children:"Content"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-sm text-muted-foreground",children:"English Content"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{htmlFor:"title_en",children:"Title *"}),e.jsx(j,{id:"title_en",type:"text",placeholder:"Enter English title",value:t.title.en,onChange:s=>r("title",{...t.title,en:s.target.value}),className:a["title.en"]?"border-destructive":""}),a["title.en"]&&e.jsx("p",{className:"text-sm text-destructive",children:a["title.en"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{htmlFor:"description_en",children:"Description *"}),e.jsx(y,{id:"description_en",placeholder:"Enter English description",value:t.description.en,onChange:s=>r("description",{...t.description,en:s.target.value}),rows:6,className:a["description.en"]?"border-destructive":""}),a["description.en"]&&e.jsx("p",{className:"text-sm text-destructive",children:a["description.en"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-sm text-muted-foreground",children:"Arabic Content"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{htmlFor:"title_ar",children:"Title *"}),e.jsx(j,{id:"title_ar",type:"text",placeholder:"أدخل العنوان بالعربية",value:t.title.ar,onChange:s=>r("title",{...t.title,ar:s.target.value}),className:a["title.ar"]?"border-destructive":"",dir:"rtl"}),a["title.ar"]&&e.jsx("p",{className:"text-sm text-destructive",children:a["title.ar"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{htmlFor:"description_ar",children:"Description *"}),e.jsx(y,{id:"description_ar",placeholder:"أدخل الوصف بالعربية",value:t.description.ar,onChange:s=>r("description",{...t.description,ar:s.target.value}),rows:6,className:a["description.ar"]?"border-destructive":"",dir:"rtl"}),a["description.ar"]&&e.jsx("p",{className:"text-sm text-destructive",children:a["description.ar"]})]})]})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center gap-3 py-2",children:[e.jsx(I,{checked:t.is_highlighted,onCheckedChange:s=>r("is_highlighted",s)}),e.jsxs("div",{children:[e.jsx(c,{className:"text-sm font-medium leading-none",children:"Highlighted Event"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Mark this event as highlighted on the timeline"})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(f,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:"Cancel"}),e.jsx(f,{type:"submit",disabled:v,className:"gap-2",children:v?"Updating...":"Update Timeline Event"})]})]})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(n,{children:[e.jsx(o,{className:"px-6 py-4 border-b",children:e.jsx(x,{className:"text-lg font-semibold",children:"Preview"})}),e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:t.period||"Period not set"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-sm",children:t.title.en||"Event title will appear here"}),t.title.ar&&e.jsx("h3",{className:"font-medium text-sm text-muted-foreground mt-1",dir:"rtl",children:t.title.ar})]}),t.description.en&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-3",children:t.description.en}),e.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Highlighted:"}),e.jsx("span",{children:t.is_highlighted?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Sort Order:"}),e.jsx("span",{children:t.sort_order})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Media:"}),e.jsxs("span",{children:[h.length," selected"]})]})]})]})})]}),h.length>0&&e.jsxs(n,{children:[e.jsx(o,{className:"px-6 py-4 border-b",children:e.jsxs(x,{className:"text-lg font-semibold",children:["Selected Media (",h.length,")"]})}),e.jsx(m,{className:"p-6",children:e.jsx("div",{className:"space-y-2",children:h.map((s,d)=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[k(s.type),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["#",d+1]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:s.type})]})]}),e.jsx(f,{type:"button",variant:"outline",size:"sm",onClick:()=>T(s.id),className:"h-8 w-8 p-0",children:e.jsx(U,{className:"w-4 h-4"})})]},s.id))})})]}),e.jsxs(n,{children:[e.jsxs(o,{className:"px-6 py-4 border-b",children:[e.jsxs(x,{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4"}),"Media Selection"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select media items for this timeline event"})]}),e.jsx(m,{className:"p-6",children:e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:g.length>0?g.map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-2",children:[e.jsx(L,{checked:t.media_ids.includes(s.id),onCheckedChange:d=>S(s,!!d)}),e.jsx("div",{className:"w-12 h-12 bg-muted rounded overflow-hidden",children:e.jsx("img",{src:s.thumbnail,alt:s.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{variant:"outline",className:"text-xs capitalize",children:s.type}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.media_id})]})]})]},s.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(N,{className:"mx-auto w-8 h-8 text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No media items available. Upload some media first."})]})})})]}),e.jsxs(n,{children:[e.jsx(o,{className:"px-6 py-4 border-b",children:e.jsx(x,{className:"text-lg font-semibold",children:"Event Info"})}),e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"ID:"}),e.jsx("span",{className:"font-mono",children:i.timeline_event_id})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Created:"}),e.jsx("span",{children:new Date(i.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Updated:"}),e.jsx("span",{children:new Date(i.updated_at).toLocaleDateString()})]})]})})]})]})]})]})]})}export{ae as default};
