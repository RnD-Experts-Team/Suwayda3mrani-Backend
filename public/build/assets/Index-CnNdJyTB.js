import{r as p,j as e,H as _e,L as Ae,a as z}from"./app-BIiAsSdM.js";import{c as te,R as ke,u as Se,a as ae,P as Re,h as Oe,b as Ee,d as Fe,F as Me,D as De,C as Ie,e as $e,A as Le,f as Te}from"./app-layout-j6e297M5.js";import{c as G,u as re,a as He,b as ze,B as h}from"./button-Ci3GZDdP.js";import{I as U}from"./input-BLSOOD9F.js";import{S as W,a as Z,b as Q,c as X,d as g,C as Ve}from"./select-26GbXy3u.js";import{B as P}from"./badge-4-t4-OA8.js";import{C as V,c as B}from"./card-BHKFko1u.js";import{C as M}from"./checkbox-B0PAlLDD.js";import{L as S}from"./label-DsMNS9Ia.js";import{u as Be,c as Ge,a as R,P as oe}from"./index-DC2lEfLk.js";import{P as ne}from"./index-DCH5W3Q5.js";import{D as qe,a as Je,b as Ke,c as Ue}from"./dialog-CVs0bnfB.js";import{T as We}from"./textarea-BZI4Tc89.js";import{F as Ze}from"./filter-B1JWKmyD.js";import{R as Y}from"./rotate-ccw-DSkPVJJC.js";import{F as Qe}from"./file-text-CrpYFNQt.js";import{M as Xe}from"./map-pin-Dqg3lhrK.js";import{E as Ye}from"./eye-BbWxfl9D.js";import{C as es}from"./chevron-left-DGk8U06R.js";/* empty css            */import"./index-C4z22CSr.js";import"./check-BLUgC2N0.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],ee=G("Download",ss);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],se=G("NotebookPen",ts);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],rs=G("Save",as);var D="Popover",[le,qs]=Ge(D,[te]),O=te(),[os,N]=le(D),ce=a=>{const{__scopePopover:c,children:n,open:i,defaultOpen:t,onOpenChange:o,modal:d=!1}=a,m=O(c),x=p.useRef(null),[j,b]=p.useState(!1),[f,v]=Be({prop:i,defaultProp:t??!1,onChange:o,caller:D});return e.jsx(ke,{...m,children:e.jsx(os,{scope:c,contentId:Se(),triggerRef:x,open:f,onOpenChange:v,onOpenToggle:p.useCallback(()=>v(C=>!C),[v]),hasCustomAnchor:j,onCustomAnchorAdd:p.useCallback(()=>b(!0),[]),onCustomAnchorRemove:p.useCallback(()=>b(!1),[]),modal:d,children:n})})};ce.displayName=D;var ie="PopoverAnchor",ns=p.forwardRef((a,c)=>{const{__scopePopover:n,...i}=a,t=N(ie,n),o=O(n),{onCustomAnchorAdd:d,onCustomAnchorRemove:m}=t;return p.useEffect(()=>(d(),()=>m()),[d,m]),e.jsx(ae,{...o,...i,ref:c})});ns.displayName=ie;var de="PopoverTrigger",ue=p.forwardRef((a,c)=>{const{__scopePopover:n,...i}=a,t=N(de,n),o=O(n),d=re(c,t.triggerRef),m=e.jsx(ne.button,{type:"button","aria-haspopup":"dialog","aria-expanded":t.open,"aria-controls":t.contentId,"data-state":fe(t.open),...i,ref:d,onClick:R(a.onClick,t.onOpenToggle)});return t.hasCustomAnchor?m:e.jsx(ae,{asChild:!0,...o,children:m})});ue.displayName=de;var q="PopoverPortal",[ls,cs]=le(q,{forceMount:void 0}),pe=a=>{const{__scopePopover:c,forceMount:n,children:i,container:t}=a,o=N(q,c);return e.jsx(ls,{scope:c,forceMount:n,children:e.jsx(oe,{present:n||o.open,children:e.jsx(Re,{asChild:!0,container:t,children:i})})})};pe.displayName=q;var w="PopoverContent",me=p.forwardRef((a,c)=>{const n=cs(w,a.__scopePopover),{forceMount:i=n.forceMount,...t}=a,o=N(w,a.__scopePopover);return e.jsx(oe,{present:i||o.open,children:o.modal?e.jsx(ds,{...t,ref:c}):e.jsx(us,{...t,ref:c})})});me.displayName=w;var is=He("PopoverContent.RemoveScroll"),ds=p.forwardRef((a,c)=>{const n=N(w,a.__scopePopover),i=p.useRef(null),t=re(c,i),o=p.useRef(!1);return p.useEffect(()=>{const d=i.current;if(d)return Oe(d)},[]),e.jsx(Ee,{as:is,allowPinchZoom:!0,children:e.jsx(he,{...a,ref:t,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:R(a.onCloseAutoFocus,d=>{d.preventDefault(),o.current||n.triggerRef.current?.focus()}),onPointerDownOutside:R(a.onPointerDownOutside,d=>{const m=d.detail.originalEvent,x=m.button===0&&m.ctrlKey===!0,j=m.button===2||x;o.current=j},{checkForDefaultPrevented:!1}),onFocusOutside:R(a.onFocusOutside,d=>d.preventDefault(),{checkForDefaultPrevented:!1})})})}),us=p.forwardRef((a,c)=>{const n=N(w,a.__scopePopover),i=p.useRef(!1),t=p.useRef(!1);return e.jsx(he,{...a,ref:c,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{a.onCloseAutoFocus?.(o),o.defaultPrevented||(i.current||n.triggerRef.current?.focus(),o.preventDefault()),i.current=!1,t.current=!1},onInteractOutside:o=>{a.onInteractOutside?.(o),o.defaultPrevented||(i.current=!0,o.detail.originalEvent.type==="pointerdown"&&(t.current=!0));const d=o.target;n.triggerRef.current?.contains(d)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&t.current&&o.preventDefault()}})}),he=p.forwardRef((a,c)=>{const{__scopePopover:n,trapFocus:i,onOpenAutoFocus:t,onCloseAutoFocus:o,disableOutsidePointerEvents:d,onEscapeKeyDown:m,onPointerDownOutside:x,onFocusOutside:j,onInteractOutside:b,...f}=a,v=N(w,n),C=O(n);return Fe(),e.jsx(Me,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:t,onUnmountAutoFocus:o,children:e.jsx(De,{asChild:!0,disableOutsidePointerEvents:d,onInteractOutside:b,onEscapeKeyDown:m,onPointerDownOutside:x,onFocusOutside:j,onDismiss:()=>v.onOpenChange(!1),children:e.jsx(Ie,{"data-state":fe(v.open),role:"dialog",id:v.contentId,...C,...f,ref:c,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),xe="PopoverClose",ps=p.forwardRef((a,c)=>{const{__scopePopover:n,...i}=a,t=N(xe,n);return e.jsx(ne.button,{type:"button",...i,ref:c,onClick:R(a.onClick,()=>t.onOpenChange(!1))})});ps.displayName=xe;var ms="PopoverArrow",hs=p.forwardRef((a,c)=>{const{__scopePopover:n,...i}=a,t=O(n);return e.jsx($e,{...t,...i,ref:c})});hs.displayName=ms;function fe(a){return a?"open":"closed"}var xs=ce,fs=ue,vs=pe,gs=me;function Ns({...a}){return e.jsx(xs,{"data-slot":"popover",...a})}function js({...a}){return e.jsx(fs,{"data-slot":"popover-trigger",...a})}function ys({className:a,align:c="center",sideOffset:n=4,...i}){return e.jsx(vs,{children:e.jsx(gs,{"data-slot":"popover-content",align:c,sideOffset:n,className:ze("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",a),...i})})}const bs=[{title:"Form Entries",href:"/form-entries"}];function Js({entries:a={},needs:c=[],predefinedNeeds:n=[],otherNeeds:i=[],filters:t={}}){const[o,d]=p.useState(()=>t?.needs?(Array.isArray(t.needs)?t.needs:[t.needs]).map(r=>parseInt(String(r))).filter(r=>!isNaN(r)):[]),[m,x]=p.useState({entry_number:t?.entry_number||"",submitter_name:t?.submitter_name||"",location:t?.location||"all",status:t?.status||"all"}),[j,b]=p.useState(!1),[f,v]=p.useState({open:!1,entryId:null,currentNotes:"",tempNotes:""}),C=Array.isArray(a?.data)?a.data:[],_=Array.isArray(a?.links)?a.links:[],E=Array.isArray(c)?c:[],I=Array.isArray(n)?n:[],A=Array.isArray(i)?i:[],J=C.length===0;p.useEffect(()=>{if(!t?.needs){d([]);return}const r=(Array.isArray(t.needs)?t.needs:[t.needs]).map(l=>parseInt(String(l))).filter(l=>!isNaN(l));d(r)},[t?.needs]),p.useEffect(()=>{x({entry_number:t?.entry_number||"",submitter_name:t?.submitter_name||"",location:t?.location||"all",status:t?.status||"all"})},[t]);const y=(s={})=>{const r={...m,needs:o.length>0?o:void 0,...s};Object.keys(r).forEach(l=>{const u=r[l];(u===""||u==="all"||Array.isArray(u)&&u.length===0)&&delete r[l]}),s.hasOwnProperty("page")||delete r.page,z.get("/form-entries",r,{preserveState:!0,preserveScroll:!0})},K=()=>{d([]),x({entry_number:"",submitter_name:"",location:"all",status:"all"}),z.get("/form-entries",{},{preserveState:!1,preserveScroll:!1})},$=(s,r)=>{const l=r?[...o,s]:o.filter(u=>u!==s);d(l)},ve=s=>{const r=A.map(u=>u.id);let l;if(s){const u=r.filter(k=>!o.includes(k));l=[...o,...u]}else l=o.filter(u=>!r.includes(u));d(l)},F=(s,r)=>{x(l=>({...l,[s]:r}))},L=s=>{if(!s)return;const l=new URL(s).searchParams.get("page");y({page:l||1})},ge=()=>E.filter(s=>o.includes(s.id)).map(s=>s.name_ar),Ne=()=>m.entry_number!==(t?.entry_number||"")||m.submitter_name!==(t?.submitter_name||"")||m.location!==(t?.location||"all")||m.status!==(t?.status||"all")||JSON.stringify(o)!==JSON.stringify(Array.isArray(t?.needs)?t.needs.map(s=>parseInt(String(s))).filter(s=>!isNaN(s)):t?.needs?[parseInt(String(t.needs))].filter(s=>!isNaN(s)):[]),je=o.length>0||Object.entries(t).some(([s,r])=>!r||r==="all"?!1:Array.isArray(r)?r.length>0:typeof r=="string"?r.trim()!=="":!0),ye=s=>{v({open:!0,entryId:s.id,currentNotes:s.notes||"",tempNotes:s.notes||""})},T=()=>{v({open:!1,entryId:null,currentNotes:"",tempNotes:""})},be=()=>{f.entryId&&z.patch(`/form-entries/${f.entryId}/notes`,{notes:f.tempNotes},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{T()}})},Ce=(s,r=60)=>s.length<=r?s:s.substring(0,r)+"...",Pe=()=>{const s=a?.current_page??1,r=a?.last_page??1,l=2,u=[];u.push(1),s-l>2&&u.push("...");const k=Math.max(2,s-l),we=Math.min(r-1,s+l);for(let H=k;H<=we;H++)u.push(H);return s+l<r-1&&u.push("..."),r>1&&u.push(r),u};return e.jsxs(Le,{breadcrumbs:bs,children:[e.jsx(_e,{title:"Form Entries"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Form Entries"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:J?"No entries found":`Showing ${a?.from??"N/A"}-${a?.to??"N/A"} of ${a?.total??0} entries`})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("a",{href:"/form-entries/export",children:e.jsxs(h,{variant:"secondary",className:"gap-1",children:[e.jsx(ee,{className:"h-4 w-4"})," Export Entries"]})}),e.jsx("a",{href:"/needs/export",children:e.jsxs(h,{variant:"secondary",className:"gap-1",children:[e.jsx(ee,{className:"h-4 w-4"})," Export Needs"]})})]})]}),e.jsx(V,{className:"overflow-hidden",children:e.jsxs(B,{className:"space-y-4 p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-5",children:[e.jsx(U,{placeholder:"Entry Number",value:m.entry_number,onChange:s=>F("entry_number",s.target.value),className:"w-full"}),e.jsx(U,{placeholder:"Submitter Name",value:m.submitter_name,onChange:s=>F("submitter_name",s.target.value),className:"w-full"}),e.jsxs(W,{value:m.location,onValueChange:s=>F("location",s),children:[e.jsx(Z,{children:e.jsx(Q,{placeholder:"Location"})}),e.jsxs(X,{children:[e.jsx(g,{value:"all",children:"All Locations"}),e.jsx(g,{value:"عائلة مضيفة",children:"عائلة مضيفة"}),e.jsx(g,{value:"مكان ايواء (او اجار)",children:"مكان ايواء (او اجار)"}),e.jsx(g,{value:"no-location",children:"لا يوجد"})]})]}),e.jsxs(W,{value:m.status,onValueChange:s=>F("status",s),children:[e.jsx(Z,{children:e.jsx(Q,{placeholder:"Status"})}),e.jsxs(X,{children:[e.jsx(g,{value:"all",children:"All Statuses"}),e.jsx(g,{value:"أسماء ضحايا",children:"أسماء ضحايا"}),e.jsx(g,{value:"منازل محترقة",children:"منازل محترقة"}),e.jsx(g,{value:"منازل مسروقة",children:"منازل مسروقة"}),e.jsx(g,{value:"نزوح",children:"نزوح"})]})]}),e.jsxs(Ns,{open:j,onOpenChange:b,children:[e.jsx(js,{asChild:!0,children:e.jsxs(h,{variant:"outline",className:"w-full justify-between",children:[e.jsx("span",{children:o.length===0?"Select Needs":`${o.length} need${o.length>1?"s":""} selected`}),e.jsx(Ve,{className:"h-4 w-4 opacity-50"})]})}),e.jsx(ys,{className:"w-80 p-4",align:"start",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Filter by Needs"}),e.jsxs("div",{className:"max-h-60 space-y-3 overflow-y-auto",children:[I.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"border-b pb-1 text-xs font-semibold tracking-wide text-muted-foreground uppercase",children:"Predefined Needs"}),I.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{id:`need-${s.id}`,checked:o.includes(s.id),onCheckedChange:r=>$(s.id,r)}),e.jsx(S,{htmlFor:`need-${s.id}`,className:"cursor-pointer text-sm font-normal",children:s.name_ar})]},s.id))]}),A.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"border-b pb-1 text-xs font-semibold tracking-wide text-muted-foreground uppercase",children:"Other Needs"}),e.jsxs("div",{className:"flex items-center space-x-2 rounded bg-muted/50 p-2",children:[e.jsx(M,{id:"select-all-others",checked:A.every(s=>o.includes(s.id)),onCheckedChange:s=>ve(s)}),e.jsx(S,{htmlFor:"select-all-others",className:"cursor-pointer text-sm font-medium",children:"Other (Select All)"})]}),A.map(s=>e.jsxs("div",{className:"ml-4 flex items-center space-x-2",children:[e.jsx(M,{id:`need-${s.id}`,checked:o.includes(s.id),onCheckedChange:r=>$(s.id,r)}),e.jsx(S,{htmlFor:`need-${s.id}`,className:"cursor-pointer text-sm font-normal",children:s.name_ar})]},s.id))]}),I.length===0&&A.length===0&&E.length>0&&e.jsx("div",{className:"space-y-2",children:E.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{id:`need-${s.id}`,checked:o.includes(s.id),onCheckedChange:r=>$(s.id,r)}),e.jsx(S,{htmlFor:`need-${s.id}`,className:"cursor-pointer text-sm font-normal",children:s.name_ar})]},s.id))})]})]})})})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(h,{onClick:()=>y(),className:"gap-1",disabled:!Ne(),children:[e.jsx(Ze,{className:"h-4 w-4"})," Apply Filters"]}),e.jsxs(h,{variant:"outline",onClick:K,className:"gap-1",children:[e.jsx(Y,{className:"h-4 w-4"})," Reset"]})]})]})}),je&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[t?.entry_number&&e.jsxs(P,{variant:"secondary",className:"gap-1",children:["Entry: ",t.entry_number,e.jsx("button",{onClick:()=>{x(s=>({...s,entry_number:""})),y({entry_number:""})},className:"ml-1 text-xs hover:text-red-500",children:"×"})]}),t?.submitter_name&&e.jsxs(P,{variant:"secondary",className:"gap-1",children:["Submitter: ",t.submitter_name,e.jsx("button",{onClick:()=>{x(s=>({...s,submitter_name:""})),y({submitter_name:""})},className:"ml-1 text-xs hover:text-red-500",children:"×"})]}),t?.location&&t.location!=="all"&&e.jsxs(P,{variant:"secondary",className:"gap-1",children:["Location: ",t.location,e.jsx("button",{onClick:()=>{x(s=>({...s,location:"all"})),y({location:""})},className:"ml-1 text-xs hover:text-red-500",children:"×"})]}),t?.status&&t.status!=="all"&&e.jsxs(P,{variant:"secondary",className:"gap-1",children:["Status: ",t.status,e.jsx("button",{onClick:()=>{x(s=>({...s,status:"all"})),y({status:""})},className:"ml-1 text-xs hover:text-red-500",children:"×"})]}),ge().map((s,r)=>e.jsxs(P,{variant:"secondary",className:"gap-1",children:[s,e.jsx("button",{onClick:()=>{const l=E.find(u=>u.name_ar===s);if(l){const u=o.filter(k=>k!==l.id);d(u),y({needs:u})}},className:"ml-1 text-xs hover:text-red-500",children:"×"})]},r))]}),J?e.jsx(V,{className:"text-center",children:e.jsxs(B,{className:"py-16",children:[e.jsx("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-muted",children:e.jsx(Qe,{className:"h-6 w-6 text-muted-foreground"})}),e.jsx("h3",{className:"mt-3 text-lg font-medium",children:"No entries found"}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Adjust your filters to see results"}),e.jsx("div",{className:"mt-4 flex justify-center gap-3",children:e.jsxs(h,{variant:"outline",onClick:K,children:[e.jsx(Y,{className:"mr-2 h-4 w-4"})," Reset filters"]})})]})}):e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:C.map(s=>e.jsx(V,{className:"flex h-full flex-col transition-shadow hover:shadow-md",children:e.jsxs(B,{className:"flex flex-1 flex-col p-4",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"leading-tight font-semibold",children:["Entry #",s.entry_number]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.submitter_name||"No submitter"})]}),s.status&&e.jsx("div",{className:"flex flex-wrap gap-1",children:s.status.split(",").map((r,l)=>e.jsx(P,{variant:"outline",className:"text-xs",children:r.trim()},l))})]}),s.location&&e.jsxs("p",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Xe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:s.location})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Submitted: ",new Date(s.date_submitted).toLocaleDateString()]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Families"}),e.jsx("p",{children:s.hosted_families_count})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Martyrs"}),e.jsx("p",{children:s.martyrs_count})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Shelters"}),e.jsx("p",{children:s.shelters_count})]})]}),s.notes&&e.jsxs("p",{className:"text-white-800 text-sm break-words",children:[e.jsx("strong",{children:"Notes:"})," ",Ce(s.notes)]})]}),e.jsxs("div",{className:"mt-4 space-y-3 border-t pt-3",children:[" ",e.jsx(Ae,{href:`/form-entries/${s.id}`,className:"w-full",children:e.jsxs(h,{variant:"default",className:"mb-2 w-full gap-2",children:[" ",e.jsx(Ye,{className:"h-4 w-4"})," View Details"]})}),e.jsxs(h,{variant:"outline",className:"w-full gap-2",onClick:()=>ye(s),children:[e.jsx(se,{className:"h-4 w-4"}),s.notes?"Edit Notes":"Add Notes"]})]})]})},s.id))}),(a?.last_page??0)>1&&e.jsxs("div",{className:"flex flex-col items-center gap-4 pt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Page ",a?.current_page??1," of ",a?.last_page??1," (",a?.total??0," total entries)"]}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-1",children:[e.jsxs(h,{variant:"outline",onClick:()=>L(_.find(s=>s.label.includes("Previous"))?.url),disabled:!_.find(s=>s.label.includes("Previous"))?.url,className:"gap-1",children:[e.jsx(es,{className:"h-4 w-4"})," Previous"]}),Pe().map((s,r)=>{if(s==="...")return e.jsx(h,{variant:"outline",disabled:!0,className:"min-w-[40px]",children:"..."},`ellipsis-${r}`);const l=_.find(u=>parseInt(u.label)===s);return e.jsx(h,{variant:s===a?.current_page?"default":"outline",onClick:()=>L(l?.url||null),className:"min-w-[40px]",disabled:!l?.url,children:s},s)}),e.jsxs(h,{variant:"outline",onClick:()=>L(_.find(s=>s.label.includes("Next"))?.url),disabled:!_.find(s=>s.label.includes("Next"))?.url,className:"gap-1",children:["Next ",e.jsx(Te,{className:"h-4 w-4"})]})]})]}),e.jsx(qe,{open:f.open,onOpenChange:T,children:e.jsxs(Je,{className:"flex max-h-[90vh] flex-col sm:max-w-[600px]",children:[e.jsx(Ke,{className:"flex-shrink-0",children:e.jsxs(Ue,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5"}),f.currentNotes?"Edit Notes":"Add Notes"]})}),e.jsx("div",{className:"flex-1 space-y-4 overflow-hidden",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"notes-textarea",className:"text-sm font-medium",children:"Notes"}),e.jsx(We,{id:"notes-textarea",placeholder:"Enter your notes here...",value:f.tempNotes,onChange:s=>v(r=>({...r,tempNotes:s.target.value})),rows:10,className:"w-full resize-none overflow-y-auto",style:{whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"break-word",lineHeight:"1.5",minHeight:"200px",maxHeight:"400px"}}),e.jsxs("p",{className:"text-xs text-gray-500",children:[f.tempNotes.length," characters"]})]})}),e.jsxs("div",{className:"flex flex-shrink-0 justify-end gap-2 border-t pt-4",children:[e.jsx(h,{variant:"outline",onClick:T,children:"Cancel"}),e.jsxs(h,{onClick:be,className:"gap-2",children:[e.jsx(rs,{className:"h-4 w-4"}),"Save Notes"]})]})]})})]})]})}export{Js as default};
